var qr=Object.defineProperty;var zr=(n,t,e)=>t in n?qr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Mt=(n,t,e)=>zr(n,typeof t!="symbol"?t+"":t,e);const Kr="modulepreload",Wr=function(n){return"/build/"+n},Ti={},Ur=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(e.map(f=>{if(f=Wr(f),f in Ti)return;Ti[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":Kr,h||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),h)return new Promise((C,H)=>{v.addEventListener("load",C),v.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return r.then(o=>{for(const u of o||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};var Xr=Object.defineProperty,Qr=(n,t,e)=>t in n?Xr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Xt=(n,t,e)=>Qr(n,typeof t!="symbol"?t+"":t,e);document.addEventListener("alpine:init",()=>{window.Alpine.store("editOnClickValidation",{pending:[],set(n,t){this.pending=this.pending.filter(e=>e.value!==n),this.pending.push({value:n,textContent:t})},has(n){return this.pending.some(t=>t.value===n)},get(n){return this.pending.find(t=>t.value===n)},notContains(n){return this.pending.length>0&&!this.has(n)},clear(){this.pending=[]},getTextContent(n){const t=this.pending.find(e=>e.value===n);return t?t.textContent:null}}),window.editOnClickValidation=window.Alpine.store("editOnClickValidation")});document.addEventListener("alpine:init",()=>{window.Alpine.store("pgBulkActions",{selected:[],init(){window.addEventListener("pgBulkActions::addMore",n=>{const t=n.__livewire.params[0];typeof this.selected[t.tableName]>"u"&&(this.selected[t.tableName]=[]),this.selected[t.tableName].push(t.value)}),window.addEventListener("pgBulkActions::clear",n=>{this.clear(n.detail)}),window.addEventListener("pgBulkActions::clearAll",()=>{this.clearAll()})},add(n,t){if(typeof this.selected[t]>"u"&&(this.selected[t]=[]),!this.selected[t].includes(n)){this.selected[t].push(n);return}this.remove(n,t)},remove(n,t){const e=this.selected[t].indexOf(n);e>-1&&this.selected[t].splice(e,1)},get(n){return this.selected[n]??""},count(n){return typeof this.selected[n]>"u"?0:this.selected[n].length},clear(n){this.selected[n]=[]},clearAll(){this.selected=[]}}),window.pgBulkActions=window.Alpine.store("pgBulkActions")});const Gr=n=>({field:n.field??null,tableName:n.tableName??null,enabled:n.enabled??!1,id:n.id,trueValue:n.trueValue,falseValue:n.falseValue,toggle:n.toggle,save(){this.toggle=this.toggle===0?1:0,this.$wire.dispatch("pg:toggleable-"+this.tableName,{id:this.id,field:this.field,value:this.toggle})}}),Jr="modulepreload",Zr=function(n){return"/"+n},Fi={},eo=function(n,t,e){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(u=>{if(u=Zr(u),u in Fi)return;Fi[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Jr,f||(m.as="script"),m.crossOrigin="",m.href=u,o&&m.setAttribute("nonce",o),document.head.appendChild(m),f)return new Promise((v,C)=>{m.addEventListener("load",v),m.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return n().catch(r)})},to=n=>({dataField:n.dataField,tableName:n.tableName,label:n.label??null,locale:n.locale??"en",onlyFuture:n.onlyFuture??!1,noWeekEnds:n.noWeekEnds??!1,customConfig:n.customConfig??null,type:n.type,element:null,selectedDates:null,init(){typeof flatpickr>"u"&&(console.log("%c%s","color: #f59e0c; font-size: 1.2em; font-weight: bold; line-height: 1.5"," PowerGrid"),console.error("%c%s","font-size: 1em; line-height: 1.5",`
Failed to mount filter: Filter::datetime('${this.dataField}') on table ['${this.tableName}']

• Install flatpickr: npm install flatpickr

• Add 'import flatpickr from "flatpickr"' in resources/js/app.js file
  `)),window.addEventListener(`pg:clear_flatpickr::${this.tableName}:${this.dataField}`,()=>{this.$refs.rangeInput&&this.element&&this.element.clear()}),window.addEventListener(`pg:clear_all_flatpickr::${this.tableName}`,()=>{this.$refs.rangeInput&&this.element&&this.element.clear()});const t=this.locale.locale;typeof t<"u"&&typeof flatpickr<"u"&&eo(()=>Ur(()=>import(`flatpickr/dist/l10n/${t}.js`),[]),[]).then(i=>{this.locale.locale=i.default[t]}).catch(i=>{console.error("flatpickr l10n error",i)});const e=this.getOptions();this.$refs.rangeInput&&typeof flatpickr<"u"&&(this.element=flatpickr(this.$refs.rangeInput,e),this.selectedDates=this.$wire.get(`filters.${this.type}.${this.dataField}.formatted`),this.element.setDate(this.selectedDates))},getOptions(){const t={mode:"range",defaultHour:0,...this.locale,...this.customConfig};return this.onlyFuture&&(t.minDate="today"),this.noWeekEnds&&(t.disable=[function(e){return e.getDay()===0||e.getDay()===6}]),t.onClose=(e,i,r)=>{e=e.map(a=>this.element.formatDate(a,"Y-m-d")),e.length>0&&this.selectedDates!==i&&Livewire.dispatch("pg:datePicker-"+this.tableName,{selectedDates:e,dateStr:i,timezone:this.customConfig.timezone??new Date().toString().match(/([-\+][0-9]+)\s/)[1],type:this.type,field:this.dataField,label:this.label})},t}}),no=n=>({theme:n.theme,id:n.id??null,dataField:n.dataField??null,content:n.content,fallback:n.fallback,inputClass:n.inputClass,saveOnMouseOut:n.saveOnMouseOut,oldContent:null,editable:!1,hash:null,hashError:!0,showEditable:!1,editableInput:"",init(){this.content.length===0&&this.fallback&&(this.content=this.htmlSpecialChars(this.fallback)),this.hash=this.dataField+"-"+this.id,window.addEventListener("toggle-"+this.hash,()=>{this.observe(()=>document.getElementById("clickable-"+this.hash),t=>{t.click(),this.observe(()=>document.getElementById("editable-"+this.hash),e=>{setTimeout(()=>this.setFocusToEnd(e),100)})})}),this.$watch("editable",t=>{if(t){let e=!1;if(this.showEditable=!1,this.content=this.htmlSpecialChars(this.content),this.oldContent=this.content,this.hashError=this.store().notContains(this.hash),this.observe(()=>document.getElementById("editable-"+this.hash),i=>{setTimeout(()=>{this.setFocusToEnd(i),this.store().getTextContent(this.hash)&&(i.textContent=this.store().getTextContent(this.hash))},30)}),this.hashError){const i=this.store().get(this.hash),r=document.getElementById("clickable-"+i);r&&r.click()}e=!0,this.editableInput=`
                <div
                    x-ref="editable"
                    x-text="content"
                    value="${this.content}"
                    placeholder="${this.content}"
                    contenteditable
                    class="pg-single-line ${this.inputClass}"
                    ${this.saveOnMouseOut?'x-on:mousedown.outside="save()"':""}
                    x-on:keydown.enter="save()"
                    id="${"editable-"+this.dataField+"-"+this.id}"
                    x-on:keydown.esc="cancel"
                >
                </div>`,this.$nextTick(()=>setTimeout(()=>{this.showEditable=e,this.focus()},150))}}),this.content=this.htmlSpecialChars(this.content)},store(){return window.editOnClickValidation},save(){this.store().clear(),this.store().set(this.hash,this.$el.textContent),this.observe(()=>document.getElementById("clickable-"+this.hash),t=>{t.textContent=this.$el.textContent}),window.addEventListener("pg:editable-close-"+this.id,()=>{this.store().clear(),this.editable=!1,this.showEditable=!1}),this.store().has(this.hash)||this.store().set(this.hash,this.$el.textContent),this.$wire.dispatch("pg:editable-"+this.$wire.tableName,{id:this.id,value:this.$el.textContent,field:this.dataField}),this.oldContent=this.store().getTextContent(this.hash),this.$nextTick(()=>{this.focus(),this.$el.setAttribute("value","")}),this.content=this.htmlSpecialChars(this.$el.textContent)},focus(){this.setFocusToEnd(this.$el)},cancel(){this.store().clear(),this.$refs.editable.textContent=this.oldContent,this.content=this.oldContent,this.editable=!1,this.showEditable=!1,this.$refs.error&&(this.$refs.error.innerHTML="")},htmlSpecialChars(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent},observe(t,e){new MutationObserver((i,r)=>{for(let a of i)if(a.type==="childList"){const o=t();if(o){e(o),r.disconnect();break}}}).observe(document.body,{childList:!0,subtree:!0})},setFocusToEnd(t){if(!t)return;const e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),i.collapse(!1),e.removeAllRanges(),e.addRange(i),t.focus()}});function io(n){n.querySelectorAll("tbody tr td").forEach(t=>{t.classList.remove("hidden")}),n.querySelectorAll("thead tr th").forEach(t=>{t.classList.remove("hidden")})}function ro(n){let t=0;const e=n.querySelectorAll("table thead tr:nth-child(1) th[fixed]"),i=yi(n);return e.forEach(r=>{t+=yi(r)}),i-t}function oo(n,t){const e=[].slice.call(n.querySelectorAll("table thead tr:nth-child(1) th")),i=[].slice.call(e).sort(function(u,f){const h=u.getAttribute("sort_order")??999,m=f.getAttribute("sort_order")??999;return h-m});let r=0,a=!0;const o=[];return i.forEach(u=>{const f=yi(u);u.getAttribute("fixed")===null&&(a&&r<=t&&r+f<=t?r+=f:(o.push(e.indexOf(u)+1),a=!1))}),o}function so(n,t){for(const e of t)n.querySelectorAll(`tbody:not(tbody[expand]) tr td:nth-child(${e})`).forEach(i=>{i.classList.add("hidden")}),n.querySelectorAll(`thead tr th:nth-child(${e})`).forEach(i=>{i.classList.add("hidden")})}function ao(n,t){var e,i;if(n.querySelectorAll("table tbody[expand] tr td div").length){for(const r of n.querySelectorAll("table tbody[expand] tr td div"))r.innerHTML="";if(t.length)for(const r of t){const a=n.querySelectorAll("table tbody:not(tbody[expand])");for(const o of a){const u=(e=o.nextElementSibling)==null?void 0:e.querySelector("tr td div");if(!u)continue;let f=n.querySelector(`table thead tr th:nth-child(${r}) span[data-value]`).textContent;const h=(i=o.querySelector(`tr:last-child td:nth-child(${r})`))==null?void 0:i.innerHTML;f.length&&(f+=":"),u.querySelector(`div[data-expand-item-${r}]`)||(u.innerHTML+=`<div class="responsive-row-expand-item-container" data-expand-item-${r}>
                    <span class="font-bold responsive-row-expand-item-name">${f}</span>
                    <span class="responsive-row-expand-item-value">${h}</span>
                </div>`)}}}}function yi(n){return parseFloat(n.getBoundingClientRect().width.toFixed(2))}function lo(n){io(n);const t=ro(n),e=oo(n,t);ao(n,e),so(n,e)}const co=()=>({running:!1,expanded:null,element:null,hasHiddenElements:!1,size:0,toggleExpanded(n){this.expanded=this.expanded==n?null:n},init(){this.$nextTick(()=>{this.handleResize(),this.observeElement(),window.addEventListener("pg-livewire-request-finished",()=>{setTimeout(()=>this.handleResize(),5)})})},handleResize(){var n;const t=this.$el;lo(t),this.hasHiddenElements=(n=t.querySelector("table tbody[expand] tr td div"))==null?void 0:n.innerHTML,this.hasHiddenElements||(this.expanded=null)},observeElement(){new ResizeObserver(n=>{n.forEach(t=>{if(t.contentRect.width>0){if(this.size===this.$el.getBoundingClientRect().width)return;this.size=this.$el.getBoundingClientRect().width,this.handleResize()}})}).observe(this.$el)}}),uo=(n,t,e)=>{Livewire.dispatch(`${n}-${t.tableName}`,{label:t.label,field:t.dataField,values:e})},br=(n,t)=>{uo("pg:multiSelect",n,t)};function ti(n,t){n.split(/\s+/).forEach(e=>{t(e)})}class fo{constructor(){this._events={}}on(t,e){ti(t,i=>{const r=this._events[i]||[];r.push(e),this._events[i]=r})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}ti(t,r=>{if(i===1){delete this._events[r];return}const a=this._events[r];a!==void 0&&(a.splice(a.indexOf(e),1),this._events[r]=a)})}trigger(t,...e){var i=this;ti(t,r=>{const a=i._events[r];a!==void 0&&a.forEach(o=>{o.apply(i,e)})})}}function po(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;const r=this,a=[];if(Array.isArray(t))t.forEach(o=>{typeof o=="string"?a.push(o):(r.plugins.settings[o.name]=o.options,a.push(o.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],a.push(e));for(;i=a.shift();)r.require(i)}loadPlugin(t){var e=this,i=e.plugins,r=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}const $n=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":go(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),wr=n=>{if(!ho(n))return n.join("");let t="",e=0;const i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((r,a)=>{if(r===n[a-1]){e++;return}i(),t+=r,e=1}),i(),t},yr=n=>{let t=Array.from(n);return $n(t)},ho=n=>new Set(n).size!==n.length,sn=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),go=n=>n.reduce((t,e)=>Math.max(t,mo(e)),0),mo=n=>Array.from(n).length,Cr=n=>{if(n.length===1)return[[n]];let t=[];const e=n.substring(1);return Cr(e).forEach(function(i){let r=i.slice(0);r[0]=n.charAt(0)+r[0],t.push(r),r=i.slice(0),r.unshift(n.charAt(0)),t.push(r)}),t},vo=[[0,65535]],bo="[̀-ͯ·ʾʼ]";let kn,_r;const wo=3,Di={},Li={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in Li){let t=Li[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);Di[i]=n}}const yo=new RegExp(Object.keys(Di).join("|")+"|"+bo,"gu"),Co=n=>{kn===void 0&&(kn=So(vo))},Pi=(n,t="NFKD")=>n.normalize(t),Mn=n=>Array.from(n).reduce((t,e)=>t+_o(e),""),_o=n=>(n=Pi(n).toLowerCase().replace(yo,t=>Di[t]||""),Pi(n,"NFC"));function*Oo(n){for(const[t,e]of n)for(let i=t;i<=e;i++){let r=String.fromCharCode(i),a=Mn(r);a!=r.toLowerCase()&&(a.length>wo||a.length!=0&&(yield{folded:a,composed:r,code_point:i}))}}const Do=n=>{const t={},e=(i,r)=>{const a=t[i]||new Set,o=new RegExp("^"+yr(a)+"$","iu");r.match(o)||(a.add(sn(r)),t[i]=a)};for(let i of Oo(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},So=n=>{const t=Do(n),e={};let i=[];for(let a in t){let o=t[a];o&&(e[a]=yr(o)),a.length>1&&i.push(sn(a))}i.sort((a,o)=>o.length-a.length);const r=$n(i);return _r=new RegExp("^"+r,"u"),e},Eo=(n,t=1)=>{let e=0;return n=n.map(i=>(kn[i]&&(e+=i.length),kn[i]||i)),e>=t?wr(n):""},Ao=(n,t=1)=>(t=Math.max(t,n.length-1),$n(Cr(n).map(e=>Eo(e,t)))),Ni=(n,t=!0)=>{let e=n.length>1?1:0;return $n(n.map(i=>{let r=[];const a=t?i.length():i.length()-1;for(let o=0;o<a;o++)r.push(Ao(i.substrs[o]||"",e));return wr(r)}))},xo=(n,t)=>{for(const e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const r=a=>{for(const o of i){if(o.start===a.start&&o.substr===a.substr)return!1;if(!(a.length==1||o.length==1)&&(a.start<o.start&&a.end>o.start||o.start<a.start&&o.end>a.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1};class Tn{constructor(){Xt(this,"parts"),Xt(this,"substrs"),Xt(this,"start"),Xt(this,"end"),this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new Tn,r=JSON.parse(JSON.stringify(this.parts)),a=r.pop();for(const f of r)i.add(f);let o=e.substr.substring(0,t-a.start),u=o.length;return i.add({start:a.start,end:a.start+u,length:u,substr:o}),i}}const Io=n=>{Co(),n=Mn(n);let t="",e=[new Tn];for(let i=0;i<n.length;i++){let r=n.substring(i).match(_r);const a=n.substring(i,i+1),o=r?r[0]:null;let u=[],f=new Set;for(const h of e){const m=h.last();if(!m||m.length==1||m.end<=i)if(o){const v=o.length;h.add({start:i,end:i+v,length:v,substr:o}),f.add("1")}else h.add({start:i,end:i+1,length:1,substr:a}),f.add("2");else if(o){let v=h.clone(i,m);const C=o.length;v.add({start:i,end:i+C,length:C,substr:o}),u.push(v)}else f.add("3")}if(u.length>0){u=u.sort((h,m)=>h.length()-m.length());for(let h of u)xo(h,e)||e.push(h);continue}if(i>0&&f.size==1&&!f.has("3")){t+=Ni(e,!1);let h=new Tn;const m=e[0];m&&h.add(m.last()),e=[h]}}return t+=Ni(e,!0),t},ko=(n,t)=>{if(n)return n[t]},Mo=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},ni=(n,t,e)=>{var i,r;return!n||(n=n+"",t.regex==null)||(r=n.search(t.regex),r===-1)?0:(i=t.string.length/n.length,r===0&&(i+=.5),i*e)},ii=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},bn=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},To=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=Mn(n+"").toLowerCase(),t=Mn(t+"").toLowerCase(),n>t?1:t>n?-1:0);class Fo{constructor(t,e){Xt(this,"items"),Xt(this,"settings"),this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const r=[],a=t.split(/\s+/);var o;return i&&(o=new RegExp("^("+Object.keys(i).map(sn).join("|")+"):(.*)$")),a.forEach(u=>{let f,h=null,m=null;o&&(f=u.match(o))&&(h=f[1],u=f[2]),u.length>0&&(this.settings.diacritics?m=Io(u)||null:m=sn(u),m&&e&&(m="\\b"+m)),r.push({string:u,regex:m?new RegExp(m,"iu"):null,field:h})}),r}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const r=t.options.fields,a=t.weights,o=r.length,u=t.getAttrFn;if(!o)return function(){return 1};const f=function(){return o===1?function(h,m){const v=r[0].field;return ni(u(m,v),h,a[v]||1)}:function(h,m){var v=0;if(h.field){const C=u(m,h.field);!h.regex&&C?v+=1/o:v+=ni(C,h,1)}else bn(a,(C,H)=>{v+=ni(u(m,H),h,C)});return v/o}}();return i===1?function(h){return f(e[0],h)}:t.options.conjunction==="and"?function(h){var m,v=0;for(let C of e){if(m=f(C,h),m<=0)return 0;v+=m}return v/i}:function(h){var m=0;return bn(e,v=>{m+=f(v,h)}),m/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];const r=this,a=t.options,o=!t.query&&a.sort_empty?a.sort_empty:a.sort;if(typeof o=="function")return o.bind(this);const u=function(f,h){return f==="$score"?h.score:t.getAttrFn(r.items[h.id],f)};if(o)for(let f of o)(t.query||f.field!=="$score")&&i.push(f);if(t.query){e=!0;for(let f of i)if(f.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(f=>f.field!=="$score");return i.length?function(f,h){var m,v;for(let C of i)if(v=C.field,m=(C.direction==="desc"?-1:1)*To(u(v,f),u(v,h)),m)return m;return 0}:null}prepareSearch(t,e){const i={};var r=Object.assign({},e);if(ii(r,"sort"),ii(r,"sort_empty"),r.fields){ii(r,"fields");const a=[];r.fields.forEach(o=>{typeof o=="string"&&(o={field:o,weight:1}),a.push(o),i[o.field]="weight"in o?o.weight:1}),r.fields=a}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?Mo:ko}}search(t,e){var i=this,r,a;a=this.prepareSearch(t,e),e=a.options,t=a.query;const o=e.score||i._getScoreFunction(a);t.length?bn(i.items,(f,h)=>{r=o(f),(e.filter===!1||r>0)&&a.items.push({score:r,id:h})}):bn(i.items,(f,h)=>{a.items.push({score:1,id:h})});const u=i._getSortFunction(a);return u&&a.items.sort(u),a.total=a.items.length,typeof e.limit=="number"&&(a.items=a.items.slice(0,e.limit)),a}}const Xe=n=>typeof n>"u"||n===null?null:xn(n),xn=n=>typeof n=="boolean"?n?"1":"0":n+"",ri=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Lo=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),Po=(n,t)=>{var e;return function(i,r){var a=this;e&&(a.loading=Math.max(a.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,a.loadedSearches[i]=!0,n.call(a,i,r)},t)}},$i=(n,t,e)=>{var i,r=n.trigger,a={};n.trigger=function(){var o=arguments[0];if(t.indexOf(o)!==-1)a[o]=arguments;else return r.apply(n,arguments)},e.apply(n,[]),n.trigger=r;for(i of t)i in a&&r.apply(n,a[i])},No=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),de=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Me=(n,t,e,i)=>{n.addEventListener(t,e,i)},Tt=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},oi=(n,t)=>n.getAttribute("id")||(n.setAttribute("id",t),t),Hi=n=>n.replace(/[\\"']/g,"\\$&"),Ft=(n,t)=>{t&&n.append(t)},ye=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},et=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Or(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Or=n=>typeof n=="string"&&n.indexOf("<")>-1,$o=n=>n.replace(/['"\\]/g,"\\$&"),si=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},wn=(n,t)=>{Object.assign(n.style,t)},Ye=(n,...t)=>{var e=Dr(t);n=Sr(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},vt=(n,...t)=>{var e=Dr(t);n=Sr(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},Dr=n=>{var t=[];return ye(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Sr=n=>(Array.isArray(n)||(n=[n]),n),ai=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},ji=(n,t=0)=>t>0?n[n.length-1]:n[0],Ho=n=>Object.keys(n).length===0,Ri=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},le=(n,t)=>{ye(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Ci=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)},jo=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=a=>{var o=a.data.match(t);if(o&&a.data.length>0){var u=document.createElement("span");u.className="highlight";var f=a.splitText(o.index);f.splitText(o[0].length);var h=f.cloneNode(!0);return u.appendChild(h),Ci(f,u),1}return 0},i=a=>{a.nodeType===1&&a.childNodes&&!/(script|style)/i.test(a.tagName)&&(a.className!=="highlight"||a.tagName!=="SPAN")&&Array.from(a.childNodes).forEach(o=>{r(o)})},r=a=>a.nodeType===3?e(a):(i(a),0);r(n)},Ro=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})},Yo=65,Bo=13,Vo=27,qo=37,zo=38,Ko=39,Wo=40,Yi=8,Uo=46,Bi=9,Xo=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),yn=Xo?"metaKey":"ctrlKey",Vi={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function qi(n,t){var e=Object.assign({},Vi,t),i=e.dataAttr,r=e.labelField,a=e.valueField,o=e.disabledField,u=e.optgroupField,f=e.optgroupLabelField,h=e.optgroupValueField,m=n.tagName.toLowerCase(),v=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!v&&!e.allowEmptyOption){let A=n.querySelector('option[value=""]');A&&(v=A.textContent)}var C={placeholder:v,options:[],optgroups:[],items:[],maxItems:null},H=()=>{var A,k=C.options,I={},S=1;let B=0;var J=D=>{var N=Object.assign({},D.dataset),F=i&&N[i];return typeof F=="string"&&F.length&&(N=Object.assign(N,JSON.parse(F))),N},_e=(D,N)=>{var F=Xe(D.value);if(F!=null&&!(!F&&!e.allowEmptyOption)){if(I.hasOwnProperty(F)){if(N){var q=I[F][u];q?Array.isArray(q)?q.push(N):I[F][u]=[q,N]:I[F][u]=N}}else{var P=J(D);P[r]=P[r]||D.textContent,P[a]=P[a]||F,P[o]=P[o]||D.disabled,P[u]=P[u]||N,P.$option=D,P.$order=P.$order||++B,I[F]=P,k.push(P)}D.selected&&C.items.push(F)}},Z=D=>{var N,F;F=J(D),F[f]=F[f]||D.getAttribute("label")||"",F[h]=F[h]||S++,F[o]=F[o]||D.disabled,F.$order=F.$order||++B,C.optgroups.push(F),N=F[h],ye(D.children,q=>{_e(q,N)})};C.maxItems=n.hasAttribute("multiple")?null:1,ye(n.children,D=>{A=D.tagName.toLowerCase(),A==="optgroup"?Z(D):A==="option"&&_e(D)})},O=()=>{const A=n.getAttribute(i);if(A)C.options=JSON.parse(A),ye(C.options,I=>{C.items.push(I[a])});else{var k=n.value.trim()||"";if(!e.allowEmptyOption&&!k.length)return;const I=k.split(e.delimiter);ye(I,S=>{const B={};B[r]=S,B[a]=S,C.options.push(B)}),C.items=I}};return m==="select"?H():O(),Object.assign({},Vi,C,t)}var zi=0;class Le extends po(fo){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,zi++;var i,r=et(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var a=window.getComputedStyle&&window.getComputedStyle(r,null);i=a.getPropertyValue("direction");const o=qi(r,e);this.settings=o,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=oi(r,"tomselect-"+zi),this.isRequired=r.required,this.sifter=new Fo(this.options,{diacritics:o.diacritics}),o.mode=o.mode||(o.maxItems===1?"single":"multi"),typeof o.hideSelected!="boolean"&&(o.hideSelected=o.mode==="multi"),typeof o.hidePlaceholder!="boolean"&&(o.hidePlaceholder=o.mode!=="multi");var u=o.createFilter;typeof u!="function"&&(typeof u=="string"&&(u=new RegExp(u)),u instanceof RegExp?o.createFilter=k=>u.test(k):o.createFilter=k=>this.settings.duplicates||!this.options[k]),this.initializePlugins(o.plugins),this.setupCallbacks(),this.setupTemplates();const f=et("<div>"),h=et("<div>"),m=this._render("dropdown"),v=et('<div role="listbox" tabindex="-1">'),C=this.input.getAttribute("class")||"",H=o.mode;var O;if(Ye(f,o.wrapperClass,C,H),Ye(h,o.controlClass),Ft(f,h),Ye(m,o.dropdownClass,H),o.copyClassesToDropdown&&Ye(m,C),Ye(v,o.dropdownContentClass),Ft(m,v),et(o.dropdownParent||f).appendChild(m),Or(o.controlInput)){O=et(o.controlInput);var A=["autocorrect","autocapitalize","autocomplete","spellcheck"];ye(A,k=>{r.getAttribute(k)&&le(O,{[k]:r.getAttribute(k)})}),O.tabIndex=-1,h.appendChild(O),this.focus_node=O}else o.controlInput?(O=et(o.controlInput),this.focus_node=O):(O=et("<input/>"),this.focus_node=h);this.wrapper=f,this.dropdown=m,this.dropdown_content=v,this.control=h,this.control_input=O,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,r=t.dropdown,a=t.dropdown_content,o=t.wrapper,u=t.control,f=t.input,h=t.focus_node,m={passive:!0},v=t.inputId+"-ts-dropdown";le(a,{id:v}),le(h,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":v});const C=oi(h,t.inputId+"-ts-control"),H="label[for='"+$o(t.inputId)+"']",O=document.querySelector(H),A=t.focus.bind(t);if(O){Me(O,"click",A),le(O,{for:C});const S=oi(O,t.inputId+"-ts-label");le(h,{"aria-labelledby":S}),le(a,{"aria-labelledby":S})}if(o.style.width=f.style.width,t.plugins.names.length){const S="plugin-"+t.plugins.names.join(" plugin-");Ye([o,r],S)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&le(f,{multiple:"multiple"}),e.placeholder&&le(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+sn(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=Po(e.load,e.loadThrottle)),Me(r,"mousemove",()=>{t.ignoreHover=!1}),Me(r,"mouseenter",S=>{var B=ai(S.target,"[data-selectable]",r);B&&t.onOptionHover(S,B)},{capture:!0}),Me(r,"click",S=>{const B=ai(S.target,"[data-selectable]");B&&(t.onOptionSelect(S,B),de(S,!0))}),Me(u,"click",S=>{var B=ai(S.target,"[data-ts-item]",u);if(B&&t.onItemSelect(S,B)){de(S,!0);return}i.value==""&&(t.onClick(),de(S,!0))}),Me(h,"keydown",S=>t.onKeyDown(S)),Me(i,"keypress",S=>t.onKeyPress(S)),Me(i,"input",S=>t.onInput(S)),Me(h,"blur",S=>t.onBlur(S)),Me(h,"focus",S=>t.onFocus(S)),Me(i,"paste",S=>t.onPaste(S));const k=S=>{const B=S.composedPath()[0];if(!o.contains(B)&&!r.contains(B)){t.isFocused&&t.blur(),t.inputState();return}B==i&&t.isOpen?S.stopPropagation():de(S,!0)},I=()=>{t.isOpen&&t.positionDropdown()};Me(document,"mousedown",k),Me(window,"scroll",I,m),Me(window,"resize",I,m),this._destroy=()=>{document.removeEventListener("mousedown",k),window.removeEventListener("scroll",I),window.removeEventListener("resize",I),O&&O.removeEventListener("click",A)},this.revertSettings={innerHTML:f.innerHTML,tabIndex:f.tabIndex},f.tabIndex=-1,f.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,Me(f,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,f.disabled?t.disable():f.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),Ye(f,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),ye(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:a=>{let o=document.createElement("div");return o.className="optgroup",o.appendChild(a.options),o},optgroup_header:(a,o)=>'<div class="optgroup-header">'+o(a[i])+"</div>",option:(a,o)=>"<div>"+o(a[e])+"</div>",item:(a,o)=>"<div>"+o(a[e])+"</div>",option_create:(a,o)=>'<div class="create">Add <strong>'+o(a.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){const e=this,i=t?qi(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){si(this.input,"input"),si(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){de(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var r=i.trim().split(e.settings.splitOn);ye(r,a=>{Xe(a)&&(this.options[a]?e.addItem(a):e.createItem(a))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){de(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),de(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==Bi&&de(t);return}switch(t.keyCode){case Yo:if(Tt(yn,t)&&e.control_input.value==""){de(t),e.selectAll();return}break;case Vo:e.isOpen&&(de(t,!0),e.close()),e.clearActiveItems();return;case Wo:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}de(t);return;case zo:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}de(t);return;case Bo:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),de(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&de(t);return;case qo:e.advanceSelection(-1,t);return;case Ko:e.advanceSelection(1,t);return;case Bi:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),de(t)),e.settings.create&&e.createItem()&&de(t));return;case Yi:case Uo:e.deleteSelection(t);return}e.isInputHidden&&!Tt(yn,t)&&de(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=Lo(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),de(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=e.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(de(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;Ye(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||vt(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,si(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];$i(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,r,a,o,u,f,h;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&Tt("shiftKey",e)&&i.activeItems.length){for(h=i.getLastActive(),o=Array.prototype.indexOf.call(i.control.children,h),u=Array.prototype.indexOf.call(i.control.children,t),o>u&&(f=o,o=u,u=f),a=o;a<=u;a++)t=i.control.children[a],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);de(e)}else r==="click"&&Tt(yn,e)||r==="keydown"&&Tt("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&vt(i,"last-active"),Ye(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),vt(t,"active")}clearActiveItems(){vt(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,le(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),le(t,{"aria-selected":"true"}),Ye(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,r=i.clientHeight,a=i.scrollTop||0,o=t.offsetHeight,u=t.getBoundingClientRect().top-i.getBoundingClientRect().top+a;u+o>r+a?this.scroll(u-r+o,e):u<a&&this.scroll(u,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(vt(this.activeOption,"active"),le(this.activeOption,{"aria-selected":null})),this.activeOption=null,le(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,ye(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(le(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&le(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,r=this,a=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(a,{score:i})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(o=>{let u=Xe(o.id);return!(u&&r.items.indexOf(u)!==-1)})),e}refreshOptions(t=!0){var e,i,r,a,o,u,f,h,m,v;const C={},H=[];var O=this,A=O.inputValue();const k=A===O.lastQuery||A==""&&O.lastQuery==null;var I=O.search(A),S=null,B=O.settings.shouldOpen||!1,J=O.dropdown_content;k&&(S=O.activeOption,S&&(m=S.closest("[data-group]"))),a=I.items.length,typeof O.settings.maxOptions=="number"&&(a=Math.min(a,O.settings.maxOptions)),a>0&&(B=!0);const _e=(D,N)=>{let F=C[D];if(F!==void 0){let P=H[F];if(P!==void 0)return[F,P.fragment]}let q=document.createDocumentFragment();return F=H.length,H.push({fragment:q,order:N,optgroup:D}),[F,q]};for(e=0;e<a;e++){let D=I.items[e];if(!D)continue;let N=D.id,F=O.options[N];if(F===void 0)continue;let q=xn(N),P=O.getOption(q,!0);for(O.settings.hideSelected||P.classList.toggle("selected",O.items.includes(q)),o=F[O.settings.optgroupField]||"",u=Array.isArray(o)?o:[o],i=0,r=u&&u.length;i<r;i++){o=u[i];let we=F.$order,pe=O.optgroups[o];pe===void 0?o="":we=pe.$order;const[ze,Ge]=_e(o,we);i>0&&(P=P.cloneNode(!0),le(P,{id:F.$id+"-clone-"+i,"aria-selected":null}),P.classList.add("ts-cloned"),vt(P,"active"),O.activeOption&&O.activeOption.dataset.value==N&&m&&m.dataset.group===o.toString()&&(S=P)),Ge.appendChild(P),o!=""&&(C[o]=ze)}}O.settings.lockOptgroupOrder&&H.sort((D,N)=>D.order-N.order),f=document.createDocumentFragment(),ye(H,D=>{let N=D.fragment,F=D.optgroup;if(!N||!N.children.length)return;let q=O.optgroups[F];if(q!==void 0){let P=document.createDocumentFragment(),we=O.render("optgroup_header",q);Ft(P,we),Ft(P,N);let pe=O.render("optgroup",{group:q,options:P});Ft(f,pe)}else Ft(f,N)}),J.innerHTML="",Ft(J,f),O.settings.highlight&&(Ro(J),I.query.length&&I.tokens.length&&ye(I.tokens,D=>{jo(J,D.regex)}));var Z=D=>{let N=O.render(D,{input:A});return N&&(B=!0,J.insertBefore(N,J.firstChild)),N};if(O.loading?Z("loading"):O.settings.shouldLoad.call(O,A)?I.items.length===0&&Z("no_results"):Z("not_loading"),h=O.canCreate(A),h&&(v=Z("option_create")),O.hasOptions=I.items.length>0||h,B){if(I.items.length>0){if(!S&&O.settings.mode==="single"&&O.items[0]!=null&&(S=O.getOption(O.items[0])),!J.contains(S)){let D=0;v&&!O.settings.addPrecedence&&(D=1),S=O.selectable()[D]}}else v&&(S=v);t&&!O.isOpen&&(O.open(),O.scrollToOption(S,"auto")),O.setActiveOption(S)}else O.clearActiveOption(),t&&O.isOpen&&O.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const r=Xe(t[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[r]=t,i.lastQuery=null,e&&(i.userOptions[r]=e,i.trigger("option_add",r,t)),r)}addOptions(t,e=!1){ye(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=Xe(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var r,a;const o=Xe(t),u=Xe(e[i.settings.valueField]);if(o===null)return;const f=i.options[o];if(f==null)return;if(typeof u!="string")throw new Error("Value must be set in option data");const h=i.getOption(o),m=i.getItem(o);if(e.$order=e.$order||f.$order,delete i.options[o],i.uncacheValue(u),i.options[u]=e,h){if(i.dropdown_content.contains(h)){const v=i._render("option",e);Ci(h,v),i.activeOption===h&&i.setActiveOption(v)}h.remove()}m&&(a=i.items.indexOf(o),a!==-1&&i.items.splice(a,1,u),r=i._render("item",e),m.classList.contains("active")&&Ye(r,"active"),Ci(m,r)),i.lastQuery=null}removeOption(t,e){const i=this;t=xn(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};ye(this.options,(r,a)=>{e(r,a)&&(i[a]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const i=Xe(t);if(i===null)return null;const r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,i="option"){var r=this,a;if(!t)return null;i=="item"?a=r.controlChildren():a=r.dropdown_content.querySelectorAll("[data-selectable]");for(let o=0;o<a.length;o++)if(a[o]==t)return e>0?a[o+1]:a[o-1];return null}getItem(t){if(typeof t=="object")return t;var e=Xe(t);return e!==null?this.control.querySelector(`[data-value="${Hi(e)}"]`):null}addItems(t,e){var i=this,r=Array.isArray(t)?t:[t];r=r.filter(o=>i.items.indexOf(o)===-1);const a=r[r.length-1];r.forEach(o=>{i.isPending=o!==a,i.addItem(o,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];$i(this,i,()=>{var r,a;const o=this,u=o.settings.mode,f=Xe(t);if(!(f&&o.items.indexOf(f)!==-1&&(u==="single"&&o.close(),u==="single"||!o.settings.duplicates))&&!(f===null||!o.options.hasOwnProperty(f))&&(u==="single"&&o.clear(e),!(u==="multi"&&o.isFull()))){if(r=o._render("item",o.options[f]),o.control.contains(r)&&(r=r.cloneNode(!0)),a=o.isFull(),o.items.splice(o.caretPos,0,f),o.insertAtCaret(r),o.isSetup){if(!o.isPending&&o.settings.hideSelected){let h=o.getOption(f),m=o.getAdjacent(h,1);m&&o.setActiveOption(m)}!o.isPending&&!o.settings.closeAfterSelect&&o.refreshOptions(o.isFocused&&u!=="single"),o.settings.closeAfterSelect!=!1&&o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",f,r),o.isPending||o.updateOriginalInput({silent:e})}(!o.isPending||!a&&o.isFull())&&(o.inputState(),o.refreshState())}})}removeItem(t=null,e){const i=this;if(t=i.getItem(t),!t)return;var r,a;const o=t.dataset.value;r=Ri(t),t.remove(),t.classList.contains("active")&&(a=i.activeItems.indexOf(t),i.activeItems.splice(a,1),vt(t,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(o)&&i.removeOption(o,e),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",o,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,r=i.caretPos,a;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var o=!1,u=f=>{if(i.unlock(),!f||typeof f!="object")return e();var h=Xe(f[i.settings.valueField]);if(typeof h!="string")return e();i.setTextboxValue(),i.addOption(f,!0),i.setCaret(r),i.addItem(h),e(f),o=!0};return typeof i.settings.create=="function"?a=i.settings.create.call(this,t,u):a={[i.settings.labelField]:t,[i.settings.valueField]:t},o||u(a),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",i),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",Ho(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,r;const a=e.input.querySelector('option[value=""]');if(e.is_select_tag){let o=function(h,m,v){return h||(h=et('<option value="'+ri(m)+'">'+ri(v)+"</option>")),h!=a&&e.input.append(h),u.push(h),(h!=a||f>0)&&(h.selected=!0),h};const u=[],f=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(h=>{h.selected=!1}),e.items.length==0&&e.settings.mode=="single"?o(a,"",""):e.items.forEach(h=>{if(i=e.options[h],r=i[e.settings.labelField]||"",u.includes(i.$option)){const m=e.input.querySelector(`option[value="${Hi(h)}"]:not(:checked)`);o(m,h,r)}else i.$option=o(i.$option,h,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,le(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),wn(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),wn(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,le(e.focus_node,{"aria-expanded":"false"}),wn(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;wn(this.dropdown,{width:e.width+"px",top:i+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();ye(i,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,i=e.caretPos,r=e.control;r.insertBefore(t,r.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,r,a,o=this;e=t&&t.keyCode===Yi?-1:1,i=No(o.control_input);const u=[];if(o.activeItems.length)a=ji(o.activeItems,e),r=Ri(a),e>0&&r++,ye(o.activeItems,f=>u.push(f));else if((o.isFocused||o.settings.mode==="single")&&o.items.length){const f=o.controlChildren();let h;e<0&&i.start===0&&i.length===0?h=f[o.caretPos-1]:e>0&&i.start===o.inputValue().length&&(h=f[o.caretPos]),h!==void 0&&u.push(h)}if(!o.shouldDelete(u,t))return!1;for(de(t,!0),typeof r<"u"&&o.setCaret(r);u.length;)o.removeItem(u.pop());return o.inputState(),o.positionDropdown(),o.refreshOptions(!1),!0}shouldDelete(t,e){const i=t.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,r,a=this;a.rtl&&(t*=-1),!a.inputValue().length&&(Tt(yn,e)||Tt("shiftKey",e)?(i=a.getLastActive(t),i?i.classList.contains("active")?r=a.getAdjacent(i,t,"item"):r=i:t>0?r=a.control_input.nextElementSibling:r=a.control_input.previousElementSibling,r&&(r.classList.contains("active")&&a.removeActiveItem(i),a.setActiveItemClass(r))):a.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return ji(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,vt(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,r;const a=this;if(typeof this.settings.render[t]!="function"||(r=a.settings.render[t].call(this,e,ri),!r))return null;if(r=et(r),t==="option"||t==="option_create"?e[a.settings.disabledField]?le(r,{"aria-disabled":"true"}):le(r,{"data-selectable":""}):t==="optgroup"&&(i=e.group[a.settings.optgroupValueField],le(r,{"data-group":i}),e.group[a.settings.disabledField]&&le(r,{"data-disabled":""})),t==="option"||t==="item"){const o=xn(e[a.settings.valueField]);le(r,{"data-value":o}),t==="item"?(Ye(r,a.settings.itemClass),le(r,{"data-ts-item":""})):(Ye(r,a.settings.optionClass),le(r,{role:"option",id:e.$id}),e.$div=r,a.options[o]=e)}return r}_render(t,e){const i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){ye(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var r=this,a=r[e];r[e]=function(){var o,u;return t==="after"&&(o=a.apply(r,arguments)),u=i.apply(r,arguments),t==="instead"?u:(t==="before"&&(o=a.apply(r,arguments)),o)}}}const Qo=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Go(){Qo(this.input,"change",()=>{this.sync()})}const Jo=n=>typeof n>"u"||n===null?null:Zo(n),Zo=n=>typeof n=="boolean"?n?"1":"0":n+"",Ki=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},es=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(ts(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},ts=n=>typeof n=="string"&&n.indexOf("<")>-1;function ns(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(o,u){u?(o.checked=!0,i.uncheckedClassNames&&o.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&o.classList.add(...i.checkedClassNames)):(o.checked=!1,i.checkedClassNames&&o.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&o.classList.add(...i.uncheckedClassNames))},a=function(o){setTimeout(()=>{var u=o.querySelector("input."+i.className);u instanceof HTMLInputElement&&r(u,o.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var o=t.settings.render.option;t.settings.render.option=(u,f)=>{var h=es(o.call(t,u,f)),m=document.createElement("input");i.className&&m.classList.add(i.className),m.addEventListener("click",function(C){Ki(C)}),m.type="checkbox";const v=Jo(u[t.settings.valueField]);return r(m,!!(v&&t.items.indexOf(v)>-1)),h.prepend(m),h}}),t.on("item_remove",o=>{var u=t.getOption(o);u&&(u.classList.remove("selected"),a(u))}),t.on("item_add",o=>{var u=t.getOption(o);u&&a(u)}),t.hook("instead","onOptionSelect",(o,u)=>{if(u.classList.contains("selected")){u.classList.remove("selected"),t.removeItem(u.dataset.value),t.refreshOptions(),Ki(o,!0);return}e.call(t,o,u),a(u)})}const is=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(rs(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},rs=n=>typeof n=="string"&&n.indexOf("<")>-1;function os(n){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=is(e.html(e));i.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(i)})}const ss=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Wt=(n,t,e,i)=>{n.addEventListener(t,e,i)},as=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},ls=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(cs(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},cs=n=>typeof n=="string"&&n.indexOf("<")>-1,us=(n,t)=>{as(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},ds=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},fs=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},ps=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function hs(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var a=n.settings.render.item;n.settings.render.item=(o,u)=>{const f=ls(a.call(n,o,u));us(f,{draggable:"true"});const h=A=>{i||ss(A),A.stopPropagation()},m=A=>{r=f,setTimeout(()=>{f.classList.add("ts-dragging")},0)},v=A=>{A.preventDefault(),f.classList.add("ts-drag-over"),H(f,r)},C=()=>{f.classList.remove("ts-drag-over")},H=(A,k)=>{k!==void 0&&(ps(k,f)?ds(A,k):fs(A,k))},O=()=>{var A;document.querySelectorAll(".ts-drag-over").forEach(I=>I.classList.remove("ts-drag-over")),(A=r)==null||A.classList.remove("ts-dragging"),r=void 0;var k=[];n.control.querySelectorAll("[data-value]").forEach(I=>{if(I.dataset.value){let S=I.dataset.value;S&&k.push(S)}}),n.setValue(k)};return Wt(f,"mousedown",h),Wt(f,"dragstart",m),Wt(f,"dragenter",v),Wt(f,"dragover",v),Wt(f,"dragleave",C),Wt(f,"dragend",O),f}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}const gs=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},ms=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(vs(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},vs=n=>typeof n=="string"&&n.indexOf("<")>-1;function bs(n){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=ms(e.html(e)),r=i.querySelector("."+e.closeClass);r&&r.addEventListener("click",a=>{gs(a,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const ws=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},ys=(n,...t)=>{var e=Cs(t);n=_s(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},Cs=n=>{var t=[];return ws(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},_s=n=>(Array.isArray(n)||(n=[n]),n),Os=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function Ds(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;const e=n.getLastActive(t);if(e){const i=Os(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),ys(e,"last-active")}else n.setCaret(n.caretPos+t)})}const Ss=27,Es=9,As=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},xs=(n,t,e,i)=>{n.addEventListener(t,e,i)},Is=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Wi=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(ks(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},ks=n=>typeof n=="string"&&n.indexOf("<")>-1,Ms=(n,...t)=>{var e=Ts(t);n=Fs(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},Ts=n=>{var t=[];return Is(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Fs=n=>(Array.isArray(n)||(n=[n]),n);function Ls(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,Ms(n.control_input,"dropdown-input");const t=Wi('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);const e=Wi('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case Ss:n.isOpen&&(As(e,!0),n.close()),n.clearActiveItems();return;case Es:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),xs(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}const Cn=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Ps(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const a of i)t.style[a]=e.style[a];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),n.on("update item_add item_remove",r),Cn(e,"input",r),Cn(e,"keyup",r),Cn(e,"blur",r),Cn(e,"update",r)})}function Ns(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function $s(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const Ui=37,Hs=39,js=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Rs=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function Ys(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,r,a,o;if(!n.isOpen||!(e.keyCode===Ui||e.keyCode===Hs))return t.call(n,e);n.ignoreHover=!0,o=js(n.activeOption,"[data-group]"),i=Rs(n.activeOption,"[data-selectable]"),o&&(e.keyCode===Ui?o=o.previousSibling:o=o.nextSibling,o&&(a=o.querySelectorAll("[data-selectable]"),r=a[Math.min(a.length-1,i)],r&&n.setActiveOption(r)))})}const Bs=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Xi=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Qi=(n,t,e,i)=>{n.addEventListener(t,e,i)},Gi=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Vs(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Vs=n=>typeof n=="string"&&n.indexOf("<")>-1;function qs(n){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+Bs(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(a,o)=>{var u=Gi(r.call(e,a,o)),f=Gi(i);return u.appendChild(f),Qi(f,"mousedown",h=>{Xi(h,!0)}),Qi(f,"click",h=>{e.isLocked||(Xi(h,!0),!e.isLocked&&e.shouldDelete([u],h)&&(e.removeItem(u),e.refreshOptions(!1),e.inputState()))}),u}})}}function zs(n){const t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[i];r&&t.setTextboxValue(e.text.call(t,r))}})}const Ks=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Ws=(n,...t)=>{var e=Us(t);n=Xs(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},Us=n=>{var t=[];return Ks(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Xs=n=>(Array.isArray(n)||(n=[n]),n);function Qs(){const n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var r={},a,o=!1,u,f=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(a.clientHeight/(a.scrollHeight-a.scrollTop)>.9)return!0;if(n.activeOption){var v=n.selectable(),C=Array.from(v).indexOf(n.activeOption);if(C>=v.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const h=v=>typeof n.settings.maxOptions=="number"&&a.children.length>=n.settings.maxOptions?!1:!!(v in r&&r[v]),m=(v,C)=>n.items.indexOf(C)>=0||f.indexOf(C)>=0;n.setNextUrl=(v,C)=>{r[v]=C},n.getUrl=v=>{if(v in r){const C=r[v];return r[v]=!1,C}return n.clearPagination(),n.settings.firstUrl.call(n,v)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!o)return e.call(n)}),n.hook("instead","canLoad",v=>v in r?h(v):t.call(n,v)),n.hook("instead","loadCallback",(v,C)=>{if(!o)n.clearOptions(m);else if(u){const H=v[0];H!==void 0&&(u.dataset.value=H[n.settings.valueField])}i.call(n,v,C),o=!1}),n.hook("after","refreshOptions",()=>{const v=n.lastValue;var C;h(v)?(C=n.render("loading_more",{query:v}),C&&(C.setAttribute("data-selectable",""),u=C)):v in r&&!a.querySelector(".no-results")&&(C=n.render("no_more_results",{query:v})),C&&(Ws(C,n.settings.optionClass),a.append(C))}),n.on("initialize",()=>{f=Object.keys(n.options),a=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),a.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&h(n.lastValue)&&(o||(o=!0,n.load.call(n,n.lastValue)))})})}Le.define("change_listener",Go);Le.define("checkbox_options",ns);Le.define("clear_button",os);Le.define("drag_drop",hs);Le.define("dropdown_header",bs);Le.define("caret_position",Ds);Le.define("dropdown_input",Ls);Le.define("input_autogrow",Ps);Le.define("no_backspace_delete",Ns);Le.define("no_active_items",$s);Le.define("optgroup_columns",Ys);Le.define("remove_button",qs);Le.define("restore_on_backspace",zs);Le.define("virtual_scroll",Qs);const Gs=n=>({init(){const t=this.$refs[`select_picker_${n.dataField}_${n.tableName}`],e={items:n.initialValues,...n.framework,onChange:a=>{br(n,a)},onInitialize:()=>{window.addEventListener(`pg:clear_multi_select::${n.tableName}:${n.dataField}`,()=>{t&&t.tomselect.clear(!0)}),window.addEventListener(`pg:clear_all_multi_select::${n.tableName}`,()=>{t&&t.tomselect.clear(!0)})}},i={valueField:n.optionValue,labelField:n.optionLabel,searchField:n.optionLabel,load:async function(a,o){function u(f,h){var m;const{method:v,url:C}=f,H=new Request(C,{method:v,body:v.toLowerCase()==="post"?JSON.stringify({search:h,...r}):void 0});H.headers.set("Content-Type","application/json"),H.headers.set("Accept","application/json"),H.headers.set("X-Requested-With","XMLHttpRequest");const O=(m=document.head.querySelector('[name="csrf-token"]'))==null?void 0:m.getAttribute("content");return O&&H.headers.set("X-CSRF-TOKEN",O),H}fetch(u(n.asyncData,a)).then(f=>f.json()).then(f=>{o(f)}).catch(()=>{o()})},render:{option:function(a,o){return`<div class="py-2 mb-1"><span>${o(a[n.optionLabel])}</span></div>`},item:function(a,o){return`<div class="py-2 mb-1"><span>${o(a[n.optionLabel])}</span></div>`}}};let r=e;n.hasOwnProperty("asyncData")&&(r=Object.assign(e,i)),new Le(t,r)}}),Js=n=>({initialValues:n.initialValues,framework:n.framework,init(){const t=this.$refs["select_picker_"+n.dataField+"_"+n.tableName],e=this.deepCopy(this.framework);new window.SlimSelect({select:t,...e,events:{afterChange:i=>{let r=i.map(a=>a.value);br(n,r)}}})},deepCopy(t){if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(this.deepCopy);const e={};for(const i in t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}}),Zs=()=>({init(){Livewire.on("pg:scrollTop",n=>{setTimeout(()=>{document.querySelector("body").scrollIntoView({behavior:"auto"})},0)}),new IntersectionObserver(n=>{n[0].isIntersecting&&this.$wire.call("loadMore")},{rootMargin:"300px"}).observe(this.$el)}}),ea=n=>({rowId:(n==null?void 0:n.rowId)??null,parentId:(n==null?void 0:n.parentId)??null,toHtml(){let t=null;const e=this.parentId??this.$wire.id;if(this.rowId){const r=window[`pgActions_${e}`];r&&r[this.rowId]!==void 0&&(t=r[this.rowId])}else t=window[`pgActionsHeader_${e}`];if(typeof t!="object"||t===null)return"";let i="";return t.forEach(r=>{let a=this.shouldHideAction(r),o=this.getReplaceHtml(r);if(!a)if(o)i+=o;else{let u=this.buildAttributesString(r);if(r.icon){let f=this.processIcon(r);if(!f)return;i+=this.buildActionHtmlWithIcon(r,u,f)}else i+=this.buildActionHtml(r,u)}}),i},shouldHideAction(t){if(t.can===!1)return!0;let e=!1;return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.action.includes(t.action)&&i.apply&&i.rule.hide&&(e=!0)}),e},getReplaceHtml(t){let e=null;return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.apply&&i.action.includes(t.action)&&i.replaceHtml&&(e=i.replaceHtml)}),e},buildAttributesString(t){let e=t.attributes??[];return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.apply&&i.action.includes(t.action)&&i.rule.setAttribute&&i.rule.setAttribute.length>0&&Object.values(i.rule.setAttribute).forEach(r=>{e[r.attribute]=r.value})}),Object.entries(e).map(([i,r])=>` ${i}="${r}"`).join("")},processIcon(t){const e=Object.entries(t.iconAttributes??[]).map(([r,a])=>` ${r}="${a}"`).join("");let i=window.pgResourceIcons[t.icon];return typeof i>"u"?(console.warn(`PowerGrid: Unable to load icons in javascript window in row: [${this.rowId}]`),null):this.replaceIconAttributes(i,e)},replaceIconAttributes(t,e){return t.replace(/<([^\s>]+)([^>]*)>/,(i,r,a)=>{let o=a.trim();const u=e.replace(/class="([^"]*)"/,(f,h)=>(o.includes("class=")?o=o.replace(/class="([^"]*)"/,(m,v)=>`class="${v} ${h.trim()}"`):o+=` ${f}`,""));return`<${r} ${o} ${u}>`})},buildActionHtmlWithIcon(t,e,i){return t.slot?`<${t.tag??"button"} ${e}>${i} ${t.slot}</${t.tag??"button"}>`:`<${t.tag??"button"} ${e}>${i}</${t.tag??"button"}>`},buildActionHtml(t,e){return`<${t.tag??"button"} ${e}>${t.slot}</${t.tag??"button"}>`}}),ta=n=>({templateContent:(n==null?void 0:n.templateContent)??null,rendered:null,parentId:(n==null?void 0:n.parentId)??null,init(){const t=Object.keys(this.templateContent)[0],e=window[`pgRowTemplates_${this.parentId??this.$wire.id}`][t],i=this.templateContent[t];if(i){let r=e;for(const[a,o]of Object.entries(i)){const u=`{{ ${a} }}`,f=String(o).replace(/'/g,"\\'");r=r.replaceAll(u,f)}this.rendered=r}}}),na=n=>({rowId:n.rowId,rules:n.rules,defaultClasses:n.defaultClasses,attributes:[],theme:[],init(){this.rules&&Object.values(this.rules).forEach(t=>{(t.applyLoop||t.apply)&&t!=null&&t.attributes&&this.attributes.push(t.attributes)})},getAttributes(){let t={class:this.defaultClasses};return this.attributes.forEach(e=>{Object.keys(e).forEach(i=>{t[i]+=t[i]?` ${e[i]}`:e[i]})}),t}});window.pgToggleable=Gr;window.pgFlatpickr=to;window.pgEditable=no;window.pgResponsive=co;window.pgTomSelect=Gs;window.pgSlimSelect=Js;window.pgLoadMore=Zs;window.pgRenderActions=ea;window.pgRowAttributes=na;window.pgRenderRowTemplate=ta;document.addEventListener("DOMContentLoaded",()=>{Livewire.hook("commit",({component:n,succeed:t,fail:e})=>{n.ephemeral.setUp&&n.ephemeral.setUp.hasOwnProperty("responsive")&&(t(()=>{queueMicrotask(()=>{window.dispatchEvent(new CustomEvent("pg-livewire-request-finished"))})}),e(()=>{window.dispatchEvent(new CustomEvent("pg-livewire-request-finished"))}))})});document.addEventListener("DOMContentLoaded",()=>{window.Alpine.directive("multisort-shift-click",(n,{expression:t})=>{n.addEventListener("click",e=>{window.Livewire.find(t).set("multiSort",e.shiftKey)})})});var li=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Qt={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},an={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},$e=function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},Ke=function(n){return n===!0?1:0};function Ji(n,t){var e;return function(){var i=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,r)},t)}}var ci=function(n){return n instanceof Array?n:[n]};function Te(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}function te(n,t,e){var i=window.document.createElement(n);return t=t||"",e=e||"",i.className=t,e!==void 0&&(i.textContent=e),i}function _n(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Er(n,t){if(t(n))return n;if(n.parentNode)return Er(n.parentNode,t)}function On(n,t){var e=te("div","numInputWrapper"),i=te("input","numInput "+n),r=te("span","arrowUp"),a=te("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var o in t)i.setAttribute(o,t[o]);return e.appendChild(i),e.appendChild(r),e.appendChild(a),e}function Be(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}var ui=function(){},Fn=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},ia={D:ui,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*Ke(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var i=parseInt(t),r=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:ui,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:ui,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},Nt={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},on={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[on.w(n,t,e)]},F:function(n,t,e){return Fn(on.n(n,t,e)-1,!1,t)},G:function(n,t,e){return $e(on.h(n,t,e))},H:function(n){return $e(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[Ke(n.getHours()>11)]},M:function(n,t){return Fn(n.getMonth(),!0,t)},S:function(n){return $e(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return $e(n.getFullYear(),4)},d:function(n){return $e(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return $e(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return $e(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Ar=function(n){var t=n.config,e=t===void 0?Qt:t,i=n.l10n,r=i===void 0?an:i,a=n.isMobile,o=a===void 0?!1:a;return function(u,f,h){var m=h||r;return e.formatDate!==void 0&&!o?e.formatDate(u,f,m):f.split("").map(function(v,C,H){return on[v]&&H[C-1]!=="\\"?on[v](u,m,e):v!=="\\"?v:""}).join("")}},_i=function(n){var t=n.config,e=t===void 0?Qt:t,i=n.l10n,r=i===void 0?an:i;return function(a,o,u,f){if(!(a!==0&&!a)){var h=f||r,m,v=a;if(a instanceof Date)m=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)m=new Date(a);else if(typeof a=="string"){var C=o||(e||Qt).dateFormat,H=String(a).trim();if(H==="today")m=new Date,u=!0;else if(e&&e.parseDate)m=e.parseDate(a,C);else if(/Z$/.test(H)||/GMT$/.test(H))m=new Date(a);else{for(var O=void 0,A=[],k=0,I=0,S="";k<C.length;k++){var B=C[k],J=B==="\\",_e=C[k-1]==="\\"||J;if(Nt[B]&&!_e){S+=Nt[B];var Z=new RegExp(S).exec(a);Z&&(O=!0)&&A[B!=="Y"?"push":"unshift"]({fn:ia[B],val:Z[++I]})}else J||(S+=".")}m=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),A.forEach(function(D){var N=D.fn,F=D.val;return m=N(m,F,h)||m}),m=O?m:void 0}}if(!(m instanceof Date&&!isNaN(m.getTime()))){e.errorHandler(new Error("Invalid date provided: "+v));return}return u===!0&&m.setHours(0,0,0,0),m}}};function qe(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var ra=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},di=function(n,t,e){return n*3600+t*60+e},oa=function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},sa={DAY:864e5};function fi(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var r=n.minDate.getHours(),a=n.minDate.getMinutes(),o=n.minDate.getSeconds();t<r&&(t=r),t===r&&e<a&&(e=a),t===r&&e===a&&i<o&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var u=n.maxDate.getHours(),f=n.maxDate.getMinutes();t=Math.min(t,u),t===u&&(e=Math.min(f,e)),t===u&&e===f&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(u){u&&Object.keys(u).forEach(function(f){return n[f]=u[f]})},r=0,a=t;r<a.length;r++){var o=a[r];i(o)}return n});var Ee=function(){return Ee=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ee.apply(this,arguments)},Zi=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),r=0,t=0;t<e;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,r++)i[r]=a[o];return i},aa=300;function la(n,t){var e={config:Ee(Ee({},Qt),me.defaultConfig),l10n:an};e.parseDate=_i({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=A,e._setHoursFromDate=C,e._positionCalendar=re,e.changeMonth=wt,e.changeYear=ve,e.clear=yt,e.close=dn,e.onMouseOver=dt,e._createElement=te,e.createDay=Z,e.destroy=Rn,e.isEnabled=nt,e.jumpToDate=S,e.updateValue=xe,e.open=Bn,e.redraw=Je,e.set=pt,e.setDate=_t,e.toggle=Yt;function i(){e.utils={getDaysInMonth:function(d,p){return d===void 0&&(d=e.currentMonth),p===void 0&&(p=e.currentYear),d===1&&(p%4===0&&p%100!==0||p%400===0)?29:e.l10n.daysInMonth[d]}}}function r(){e.element=e.input=n,e.isOpen=!1,Oe(),T(),he(),jt(),i(),e.isMobile||_e(),I(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&C(e.config.noCalendar?e.latestSelectedDateObj:void 0),xe(!1)),u();var d=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&d&&re(),ee("onReady")}function a(){var d;return((d=e.calendarContainer)===null||d===void 0?void 0:d.getRootNode()).activeElement||document.activeElement}function o(d){return d.bind(e)}function u(){var d=e.config;d.weekNumbers===!1&&d.showMonths===1||d.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var p=(e.days.offsetWidth+1)*d.showMonths;e.daysContainer.style.width=p+"px",e.calendarContainer.style.width=p+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function f(d){if(e.selectedDates.length===0){var p=e.config.minDate===void 0||qe(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),b=fi(e.config);p.setHours(b.hours,b.minutes,b.seconds,p.getMilliseconds()),e.selectedDates=[p],e.latestSelectedDateObj=p}d!==void 0&&d.type!=="blur"&&St(d);var y=e._input.value;v(),xe(),e._input.value!==y&&e._debouncedChange()}function h(d,p){return d%12+12*Ke(p===e.l10n.amPM[1])}function m(d){switch(d%24){case 0:case 12:return 12;default:return d%12}}function v(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var d=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,p=(parseInt(e.minuteElement.value,10)||0)%60,b=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(d=h(d,e.amPM.textContent));var y=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&qe(e.latestSelectedDateObj,e.config.minDate,!0)===0,M=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&qe(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var $=di(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),U=di(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),j=di(d,p,b);if(j>U&&j<$){var Q=oa($);d=Q[0],p=Q[1],b=Q[2]}}else{if(M){var R=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;d=Math.min(d,R.getHours()),d===R.getHours()&&(p=Math.min(p,R.getMinutes())),p===R.getMinutes()&&(b=Math.min(b,R.getSeconds()))}if(y){var K=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;d=Math.max(d,K.getHours()),d===K.getHours()&&p<K.getMinutes()&&(p=K.getMinutes()),p===K.getMinutes()&&(b=Math.max(b,K.getSeconds()))}}H(d,p,b)}}function C(d){var p=d||e.latestSelectedDateObj;p&&p instanceof Date&&H(p.getHours(),p.getMinutes(),p.getSeconds())}function H(d,p,b){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(d%24,p,b||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=$e(e.config.time_24hr?d:(12+d)%12+12*Ke(d%12===0)),e.minuteElement.value=$e(p),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[Ke(d>=12)]),e.secondElement!==void 0&&(e.secondElement.value=$e(b)))}function O(d){var p=Be(d),b=parseInt(p.value)+(d.delta||0);(b/1e3>1||d.key==="Enter"&&!/[^\d]/.test(b.toString()))&&ve(b)}function A(d,p,b,y){if(p instanceof Array)return p.forEach(function(M){return A(d,M,b,y)});if(d instanceof Array)return d.forEach(function(M){return A(M,p,b,y)});d.addEventListener(p,b,y),e._handlers.push({remove:function(){return d.removeEventListener(p,b,y)}})}function k(){ee("onChange")}function I(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(b){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+b+"]"),function(y){return A(y,"click",e[b])})}),e.isMobile){Rt();return}var d=Ji(Ct,50);if(e._debouncedChange=Ji(k,aa),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&A(e.daysContainer,"mouseover",function(b){e.config.mode==="range"&&dt(Be(b))}),A(e._input,"keydown",it),e.calendarContainer!==void 0&&A(e.calendarContainer,"keydown",it),!e.config.inline&&!e.config.static&&A(window,"resize",d),window.ontouchstart!==void 0?A(window.document,"touchstart",$t):A(window.document,"mousedown",$t),A(window.document,"focus",$t,{capture:!0}),e.config.clickOpens===!0&&(A(e._input,"focus",e.open),A(e._input,"click",e.open)),e.daysContainer!==void 0&&(A(e.monthNav,"click",ht),A(e.monthNav,["keyup","increment"],O),A(e.daysContainer,"click",se)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var p=function(b){return Be(b).select()};A(e.timeContainer,["increment"],f),A(e.timeContainer,"blur",f,{capture:!0}),A(e.timeContainer,"click",B),A([e.hourElement,e.minuteElement],["focus","click"],p),e.secondElement!==void 0&&A(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&A(e.amPM,"click",function(b){f(b)})}e.config.allowInput&&A(e._input,"blur",Yn)}function S(d,p){var b=d!==void 0?e.parseDate(d):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),y=e.currentYear,M=e.currentMonth;try{b!==void 0&&(e.currentYear=b.getFullYear(),e.currentMonth=b.getMonth())}catch($){$.message="Invalid date supplied: "+b,e.config.errorHandler($)}p&&e.currentYear!==y&&(ee("onYearChange"),pe()),p&&(e.currentYear!==y||e.currentMonth!==M)&&ee("onMonthChange"),e.redraw()}function B(d){var p=Be(d);~p.className.indexOf("arrow")&&J(d,p.classList.contains("arrowUp")?1:-1)}function J(d,p,b){var y=d&&Be(d),M=b||y&&y.parentNode&&y.parentNode.firstChild,$=Ae("increment");$.delta=p,M&&M.dispatchEvent($)}function _e(){var d=window.document.createDocumentFragment();if(e.calendarContainer=te("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(d.appendChild(Ne()),e.innerContainer=te("div","flatpickr-innerContainer"),e.config.weekNumbers){var p=jn(),b=p.weekWrapper,y=p.weekNumbers;e.innerContainer.appendChild(b),e.weekNumbers=y,e.weekWrapper=b}e.rContainer=te("div","flatpickr-rContainer"),e.rContainer.appendChild(un()),e.daysContainer||(e.daysContainer=te("div","flatpickr-days"),e.daysContainer.tabIndex=-1),we(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),d.appendChild(e.innerContainer)}e.config.enableTime&&d.appendChild(cn()),Te(e.calendarContainer,"rangeMode",e.config.mode==="range"),Te(e.calendarContainer,"animate",e.config.animate===!0),Te(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(d);var M=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!M&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var $=te("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore($,e.element),$.appendChild(e.element),e.altInput&&$.appendChild(e.altInput),$.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function Z(d,p,b,y){var M=nt(p,!0),$=te("span",d,p.getDate().toString());return $.dateObj=p,$.$i=y,$.setAttribute("aria-label",e.formatDate(p,e.config.ariaDateFormat)),d.indexOf("hidden")===-1&&qe(p,e.now)===0&&(e.todayDateElem=$,$.classList.add("today"),$.setAttribute("aria-current","date")),M?($.tabIndex=-1,Ot(p)&&($.classList.add("selected"),e.selectedDateElem=$,e.config.mode==="range"&&(Te($,"startRange",e.selectedDates[0]&&qe(p,e.selectedDates[0],!0)===0),Te($,"endRange",e.selectedDates[1]&&qe(p,e.selectedDates[1],!0)===0),d==="nextMonthDay"&&$.classList.add("inRange")))):$.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Jt(p)&&!Ot(p)&&$.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&d!=="prevMonthDay"&&y%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(p)+"</span>"),ee("onDayCreate",$),$}function D(d){d.focus(),e.config.mode==="range"&&dt(d)}function N(d){for(var p=d>0?0:e.config.showMonths-1,b=d>0?e.config.showMonths:-1,y=p;y!=b;y+=d)for(var M=e.daysContainer.children[y],$=d>0?0:M.children.length-1,U=d>0?M.children.length:-1,j=$;j!=U;j+=d){var Q=M.children[j];if(Q.className.indexOf("hidden")===-1&&nt(Q.dateObj))return Q}}function F(d,p){for(var b=d.className.indexOf("Month")===-1?d.dateObj.getMonth():e.currentMonth,y=p>0?e.config.showMonths:-1,M=p>0?1:-1,$=b-e.currentMonth;$!=y;$+=M)for(var U=e.daysContainer.children[$],j=b-e.currentMonth===$?d.$i+p:p<0?U.children.length-1:0,Q=U.children.length,R=j;R>=0&&R<Q&&R!=(p>0?Q:-1);R+=M){var K=U.children[R];if(K.className.indexOf("hidden")===-1&&nt(K.dateObj)&&Math.abs(d.$i-R)>=Math.abs(p))return D(K)}e.changeMonth(M),q(N(M),0)}function q(d,p){var b=a(),y=Ht(b||document.body),M=d!==void 0?d:y?b:e.selectedDateElem!==void 0&&Ht(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Ht(e.todayDateElem)?e.todayDateElem:N(p>0?1:-1);M===void 0?e._input.focus():y?F(M,p):D(M)}function P(d,p){for(var b=(new Date(d,p,1).getDay()-e.l10n.firstDayOfWeek+7)%7,y=e.utils.getDaysInMonth((p-1+12)%12,d),M=e.utils.getDaysInMonth(p,d),$=window.document.createDocumentFragment(),U=e.config.showMonths>1,j=U?"prevMonthDay hidden":"prevMonthDay",Q=U?"nextMonthDay hidden":"nextMonthDay",R=y+1-b,K=0;R<=y;R++,K++)$.appendChild(Z("flatpickr-day "+j,new Date(d,p-1,R),R,K));for(R=1;R<=M;R++,K++)$.appendChild(Z("flatpickr-day",new Date(d,p,R),R,K));for(var ne=M+1;ne<=42-b&&(e.config.showMonths===1||K%7!==0);ne++,K++)$.appendChild(Z("flatpickr-day "+Q,new Date(d,p+1,ne%M),ne,K));var je=te("div","dayContainer");return je.appendChild($),je}function we(){if(e.daysContainer!==void 0){_n(e.daysContainer),e.weekNumbers&&_n(e.weekNumbers);for(var d=document.createDocumentFragment(),p=0;p<e.config.showMonths;p++){var b=new Date(e.currentYear,e.currentMonth,1);b.setMonth(e.currentMonth+p),d.appendChild(P(b.getFullYear(),b.getMonth()))}e.daysContainer.appendChild(d),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&dt()}}function pe(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var d=function(y){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&y<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&y>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var p=0;p<12;p++)if(d(p)){var b=te("option","flatpickr-monthDropdown-month");b.value=new Date(e.currentYear,p).getMonth().toString(),b.textContent=Fn(p,e.config.shorthandCurrentMonth,e.l10n),b.tabIndex=-1,e.currentMonth===p&&(b.selected=!0),e.monthsDropdownContainer.appendChild(b)}}}function ze(){var d=te("div","flatpickr-month"),p=window.document.createDocumentFragment(),b;e.config.showMonths>1||e.config.monthSelectorType==="static"?b=te("span","cur-month"):(e.monthsDropdownContainer=te("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),A(e.monthsDropdownContainer,"change",function(U){var j=Be(U),Q=parseInt(j.value,10);e.changeMonth(Q-e.currentMonth),ee("onMonthChange")}),pe(),b=e.monthsDropdownContainer);var y=On("cur-year",{tabindex:"-1"}),M=y.getElementsByTagName("input")[0];M.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&M.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(M.setAttribute("max",e.config.maxDate.getFullYear().toString()),M.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var $=te("div","flatpickr-current-month");return $.appendChild(b),$.appendChild(y),p.appendChild($),d.appendChild(p),{container:d,yearElement:M,monthElement:b}}function Ge(){_n(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var d=e.config.showMonths;d--;){var p=ze();e.yearElements.push(p.yearElement),e.monthElements.push(p.monthElement),e.monthNav.appendChild(p.container)}e.monthNav.appendChild(e.nextMonthNav)}function Ne(){return e.monthNav=te("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=te("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=te("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Ge(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(d){e.__hidePrevMonthArrow!==d&&(Te(e.prevMonthNav,"flatpickr-disabled",d),e.__hidePrevMonthArrow=d)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(d){e.__hideNextMonthArrow!==d&&(Te(e.nextMonthNav,"flatpickr-disabled",d),e.__hideNextMonthArrow=d)}}),e.currentYearElement=e.yearElements[0],Dt(),e.monthNav}function cn(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var d=fi(e.config);e.timeContainer=te("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var p=te("span","flatpickr-time-separator",":"),b=On("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=b.getElementsByTagName("input")[0];var y=On("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=y.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=$e(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?d.hours:m(d.hours)),e.minuteElement.value=$e(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():d.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(b),e.timeContainer.appendChild(p),e.timeContainer.appendChild(y),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var M=On("flatpickr-second");e.secondElement=M.getElementsByTagName("input")[0],e.secondElement.value=$e(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():d.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(te("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(M)}return e.config.time_24hr||(e.amPM=te("span","flatpickr-am-pm",e.l10n.amPM[Ke((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function un(){e.weekdayContainer?_n(e.weekdayContainer):e.weekdayContainer=te("div","flatpickr-weekdays");for(var d=e.config.showMonths;d--;){var p=te("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(p)}return We(),e.weekdayContainer}function We(){if(e.weekdayContainer){var d=e.l10n.firstDayOfWeek,p=Zi(e.l10n.weekdays.shorthand);d>0&&d<p.length&&(p=Zi(p.splice(d,p.length),p.splice(0,d)));for(var b=e.config.showMonths;b--;)e.weekdayContainer.children[b].innerHTML=`
      <span class='flatpickr-weekday'>
        `+p.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function jn(){e.calendarContainer.classList.add("hasWeeks");var d=te("div","flatpickr-weekwrapper");d.appendChild(te("span","flatpickr-weekday",e.l10n.weekAbbreviation));var p=te("div","flatpickr-weeks");return d.appendChild(p),{weekWrapper:d,weekNumbers:p}}function wt(d,p){p===void 0&&(p=!0);var b=p?d:d-e.currentMonth;b<0&&e._hidePrevMonthArrow===!0||b>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=b,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,ee("onYearChange"),pe()),we(),ee("onMonthChange"),Dt())}function yt(d,p){if(d===void 0&&(d=!0),p===void 0&&(p=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,p===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var b=fi(e.config),y=b.hours,M=b.minutes,$=b.seconds;H(y,M,$)}e.redraw(),d&&ee("onChange")}function dn(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),ee("onClose")}function Rn(){e.config!==void 0&&ee("onDestroy");for(var d=e._handlers.length;d--;)e._handlers[d].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var p=e.calendarContainer.parentNode;if(p.lastChild&&p.removeChild(p.lastChild),p.parentNode){for(;p.firstChild;)p.parentNode.insertBefore(p.firstChild,p);p.parentNode.removeChild(p)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(b){try{delete e[b]}catch{}})}function ut(d){return e.calendarContainer.contains(d)}function $t(d){if(e.isOpen&&!e.config.inline){var p=Be(d),b=ut(p),y=p===e.input||p===e.altInput||e.element.contains(p)||d.path&&d.path.indexOf&&(~d.path.indexOf(e.input)||~d.path.indexOf(e.altInput)),M=!y&&!b&&!ut(d.relatedTarget),$=!e.config.ignoredFocusElements.some(function(U){return U.contains(p)});M&&$&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&f(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function ve(d){if(!(!d||e.config.minDate&&d<e.config.minDate.getFullYear()||e.config.maxDate&&d>e.config.maxDate.getFullYear())){var p=d,b=e.currentYear!==p;e.currentYear=p||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),b&&(e.redraw(),ee("onYearChange"),pe())}}function nt(d,p){var b;p===void 0&&(p=!0);var y=e.parseDate(d,void 0,p);if(e.config.minDate&&y&&qe(y,e.config.minDate,p!==void 0?p:!e.minDateHasTime)<0||e.config.maxDate&&y&&qe(y,e.config.maxDate,p!==void 0?p:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(y===void 0)return!1;for(var M=!!e.config.enable,$=(b=e.config.enable)!==null&&b!==void 0?b:e.config.disable,U=0,j=void 0;U<$.length;U++){if(j=$[U],typeof j=="function"&&j(y))return M;if(j instanceof Date&&y!==void 0&&j.getTime()===y.getTime())return M;if(typeof j=="string"){var Q=e.parseDate(j,void 0,!0);return Q&&Q.getTime()===y.getTime()?M:!M}else if(typeof j=="object"&&y!==void 0&&j.from&&j.to&&y.getTime()>=j.from.getTime()&&y.getTime()<=j.to.getTime())return M}return!M}function Ht(d){return e.daysContainer!==void 0?d.className.indexOf("hidden")===-1&&d.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(d):!1}function Yn(d){var p=d.target===e._input,b=e._input.value.trimEnd()!==Bt();p&&b&&!(d.relatedTarget&&ut(d.relatedTarget))&&e.setDate(e._input.value,!0,d.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function it(d){var p=Be(d),b=e.config.wrap?n.contains(p):p===e._input,y=e.config.allowInput,M=e.isOpen&&(!y||!b),$=e.config.inline&&b&&!y;if(d.keyCode===13&&b){if(y)return e.setDate(e._input.value,!0,p===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),p.blur();e.open()}else if(ut(p)||M||$){var U=!!e.timeContainer&&e.timeContainer.contains(p);switch(d.keyCode){case 13:U?(d.preventDefault(),f(),ft()):se(d);break;case 27:d.preventDefault(),ft();break;case 8:case 46:b&&!e.config.allowInput&&(d.preventDefault(),e.clear());break;case 37:case 39:if(!U&&!b){d.preventDefault();var j=a();if(e.daysContainer!==void 0&&(y===!1||j&&Ht(j))){var Q=d.keyCode===39?1:-1;d.ctrlKey?(d.stopPropagation(),wt(Q),q(N(1),0)):q(void 0,Q)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:d.preventDefault();var R=d.keyCode===40?1:-1;e.daysContainer&&p.$i!==void 0||p===e.input||p===e.altInput?d.ctrlKey?(d.stopPropagation(),ve(e.currentYear-R),q(N(1),0)):U||q(void 0,R*7):p===e.currentYearElement?ve(e.currentYear-R):e.config.enableTime&&(!U&&e.hourElement&&e.hourElement.focus(),f(d),e._debouncedChange());break;case 9:if(U){var K=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(Ie){return Ie}),ne=K.indexOf(p);if(ne!==-1){var je=K[ne+(d.shiftKey?-1:1)];d.preventDefault(),(je||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(p)&&d.shiftKey&&(d.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&p===e.amPM)switch(d.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],v(),xe();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],v(),xe();break}(b||ut(p))&&ee("onKeyDown",d)}function dt(d,p){if(p===void 0&&(p="flatpickr-day"),!(e.selectedDates.length!==1||d&&(!d.classList.contains(p)||d.classList.contains("flatpickr-disabled")))){for(var b=d?d.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),y=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),M=Math.min(b,e.selectedDates[0].getTime()),$=Math.max(b,e.selectedDates[0].getTime()),U=!1,j=0,Q=0,R=M;R<$;R+=sa.DAY)nt(new Date(R),!0)||(U=U||R>M&&R<$,R<y&&(!j||R>j)?j=R:R>y&&(!Q||R<Q)&&(Q=R));var K=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+p));K.forEach(function(ne){var je=ne.dateObj,Ie=je.getTime(),Et=j>0&&Ie<j||Q>0&&Ie>Q;if(Et){ne.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(ot){ne.classList.remove(ot)});return}else if(U&&!Et)return;["startRange","inRange","endRange","notAllowed"].forEach(function(ot){ne.classList.remove(ot)}),d!==void 0&&(d.classList.add(b<=e.selectedDates[0].getTime()?"startRange":"endRange"),y<b&&Ie===y?ne.classList.add("startRange"):y>b&&Ie===y&&ne.classList.add("endRange"),Ie>=j&&(Q===0||Ie<=Q)&&ra(Ie,y,b)&&ne.classList.add("inRange"))})}}function Ct(){e.isOpen&&!e.config.static&&!e.config.inline&&re()}function Bn(d,p){if(p===void 0&&(p=e._positionElement),e.isMobile===!0){if(d){d.preventDefault();var b=Be(d);b&&b.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),ee("onOpen");return}else if(e._input.disabled||e.config.inline)return;var y=e.isOpen;e.isOpen=!0,y||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),ee("onOpen"),re(p)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(d===void 0||!e.timeContainer.contains(d.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function fn(d){return function(p){var b=e.config["_"+d+"Date"]=e.parseDate(p,e.config.dateFormat),y=e.config["_"+(d==="min"?"max":"min")+"Date"];b!==void 0&&(e[d==="min"?"minDateHasTime":"maxDateHasTime"]=b.getHours()>0||b.getMinutes()>0||b.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(M){return nt(M)}),!e.selectedDates.length&&d==="min"&&C(b),xe()),e.daysContainer&&(Je(),b!==void 0?e.currentYearElement[d]=b.getFullYear().toString():e.currentYearElement.removeAttribute(d),e.currentYearElement.disabled=!!y&&b!==void 0&&y.getFullYear()===b.getFullYear())}}function Oe(){var d=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],p=Ee(Ee({},JSON.parse(JSON.stringify(n.dataset||{}))),t),b={};e.config.parseDate=p.parseDate,e.config.formatDate=p.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(K){e.config._enable=Ue(K)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(K){e.config._disable=Ue(K)}});var y=p.mode==="time";if(!p.dateFormat&&(p.enableTime||y)){var M=me.defaultConfig.dateFormat||Qt.dateFormat;b.dateFormat=p.noCalendar||y?"H:i"+(p.enableSeconds?":S":""):M+" H:i"+(p.enableSeconds?":S":"")}if(p.altInput&&(p.enableTime||y)&&!p.altFormat){var $=me.defaultConfig.altFormat||Qt.altFormat;b.altFormat=p.noCalendar||y?"h:i"+(p.enableSeconds?":S K":" K"):$+(" h:i"+(p.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:fn("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:fn("max")});var U=function(K){return function(ne){e.config[K==="min"?"_minTime":"_maxTime"]=e.parseDate(ne,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:U("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:U("max")}),p.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,b,p);for(var j=0;j<d.length;j++)e.config[d[j]]=e.config[d[j]]===!0||e.config[d[j]]==="true";li.filter(function(K){return e.config[K]!==void 0}).forEach(function(K){e.config[K]=ci(e.config[K]||[]).map(o)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var j=0;j<e.config.plugins.length;j++){var Q=e.config.plugins[j](e)||{};for(var R in Q)li.indexOf(R)>-1?e.config[R]=ci(Q[R]).map(o).concat(e.config[R]):typeof p[R]>"u"&&(e.config[R]=Q[R])}p.altInputClass||(e.config.altInputClass=be().className+" "+e.config.altInputClass),ee("onParseConfig")}function be(){return e.config.wrap?n.querySelector("[data-input]"):n}function T(){typeof e.config.locale!="object"&&typeof me.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=Ee(Ee({},me.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?me.l10ns[e.config.locale]:void 0),Nt.D="("+e.l10n.weekdays.shorthand.join("|")+")",Nt.l="("+e.l10n.weekdays.longhand.join("|")+")",Nt.M="("+e.l10n.months.shorthand.join("|")+")",Nt.F="("+e.l10n.months.longhand.join("|")+")",Nt.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var d=Ee(Ee({},t),JSON.parse(JSON.stringify(n.dataset||{})));d.time_24hr===void 0&&me.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Ar(e),e.parseDate=_i({config:e.config,l10n:e.l10n})}function re(d){if(typeof e.config.position=="function")return void e.config.position(e,d);if(e.calendarContainer!==void 0){ee("onPreCalendarPosition");var p=d||e._positionElement,b=Array.prototype.reduce.call(e.calendarContainer.children,function(zn,Kn){return zn+Kn.offsetHeight},0),y=e.calendarContainer.offsetWidth,M=e.config.position.split(" "),$=M[0],U=M.length>1?M[1]:null,j=p.getBoundingClientRect(),Q=window.innerHeight-j.bottom,R=$==="above"||$!=="below"&&Q<b&&j.top>b,K=window.pageYOffset+j.top+(R?-b-2:p.offsetHeight+2);if(Te(e.calendarContainer,"arrowTop",!R),Te(e.calendarContainer,"arrowBottom",R),!e.config.inline){var ne=window.pageXOffset+j.left,je=!1,Ie=!1;U==="center"?(ne-=(y-j.width)/2,je=!0):U==="right"&&(ne-=y-j.width,Ie=!0),Te(e.calendarContainer,"arrowLeft",!je&&!Ie),Te(e.calendarContainer,"arrowCenter",je),Te(e.calendarContainer,"arrowRight",Ie);var Et=window.document.body.offsetWidth-(window.pageXOffset+j.right),ot=ne+y>window.document.body.offsetWidth,pn=Et+y>window.document.body.offsetWidth;if(Te(e.calendarContainer,"rightMost",ot),!e.config.static)if(e.calendarContainer.style.top=K+"px",!ot)e.calendarContainer.style.left=ne+"px",e.calendarContainer.style.right="auto";else if(!pn)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Et+"px";else{var Vt=X();if(Vt===void 0)return;var st=window.document.body.offsetWidth,Vn=Math.max(0,st/2-y/2),z=".flatpickr-calendar.centerMost:before",qn=".flatpickr-calendar.centerMost:after",qt=Vt.cssRules.length,Zt="{left:"+j.left+"px;right:auto;}";Te(e.calendarContainer,"rightMost",!1),Te(e.calendarContainer,"centerMost",!0),Vt.insertRule(z+","+qn+Zt,qt),e.calendarContainer.style.left=Vn+"px",e.calendarContainer.style.right="auto"}}}}function X(){for(var d=null,p=0;p<document.styleSheets.length;p++){var b=document.styleSheets[p];if(b.cssRules){try{b.cssRules}catch{continue}d=b;break}}return d??oe()}function oe(){var d=document.createElement("style");return document.head.appendChild(d),d.sheet}function Je(){e.config.noCalendar||e.isMobile||(pe(),Dt(),we())}function ft(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function se(d){d.preventDefault(),d.stopPropagation();var p=function(K){return K.classList&&K.classList.contains("flatpickr-day")&&!K.classList.contains("flatpickr-disabled")&&!K.classList.contains("notAllowed")},b=Er(Be(d),p);if(b!==void 0){var y=b,M=e.latestSelectedDateObj=new Date(y.dateObj.getTime()),$=(M.getMonth()<e.currentMonth||M.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=y,e.config.mode==="single")e.selectedDates=[M];else if(e.config.mode==="multiple"){var U=Ot(M);U?e.selectedDates.splice(parseInt(U),1):e.selectedDates.push(M)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=M,e.selectedDates.push(M),qe(M,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(K,ne){return K.getTime()-ne.getTime()}));if(v(),$){var j=e.currentYear!==M.getFullYear();e.currentYear=M.getFullYear(),e.currentMonth=M.getMonth(),j&&(ee("onYearChange"),pe()),ee("onMonthChange")}if(Dt(),we(),xe(),!$&&e.config.mode!=="range"&&e.config.showMonths===1?D(y):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var Q=e.config.mode==="single"&&!e.config.enableTime,R=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(Q||R)&&ft()}k()}}var He={locale:[T,We],showMonths:[Ge,u,un],minDate:[S],maxDate:[S],positionElement:[rt],clickOpens:[function(){e.config.clickOpens===!0?(A(e._input,"focus",e.open),A(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function pt(d,p){if(d!==null&&typeof d=="object"){Object.assign(e.config,d);for(var b in d)He[b]!==void 0&&He[b].forEach(function(y){return y()})}else e.config[d]=p,He[d]!==void 0?He[d].forEach(function(y){return y()}):li.indexOf(d)>-1&&(e.config[d]=ci(p));e.redraw(),xe(!0)}function De(d,p){var b=[];if(d instanceof Array)b=d.map(function(y){return e.parseDate(y,p)});else if(d instanceof Date||typeof d=="number")b=[e.parseDate(d,p)];else if(typeof d=="string")switch(e.config.mode){case"single":case"time":b=[e.parseDate(d,p)];break;case"multiple":b=d.split(e.config.conjunction).map(function(y){return e.parseDate(y,p)});break;case"range":b=d.split(e.l10n.rangeSeparator).map(function(y){return e.parseDate(y,p)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(d)));e.selectedDates=e.config.allowInvalidPreload?b:b.filter(function(y){return y instanceof Date&&nt(y,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(y,M){return y.getTime()-M.getTime()})}function _t(d,p,b){if(p===void 0&&(p=!1),b===void 0&&(b=e.config.dateFormat),d!==0&&!d||d instanceof Array&&d.length===0)return e.clear(p);De(d,b),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),S(void 0,p),C(),e.selectedDates.length===0&&e.clear(!1),xe(p),p&&ee("onChange")}function Ue(d){return d.slice().map(function(p){return typeof p=="string"||typeof p=="number"||p instanceof Date?e.parseDate(p,void 0,!0):p&&typeof p=="object"&&p.from&&p.to?{from:e.parseDate(p.from,void 0),to:e.parseDate(p.to,void 0)}:p}).filter(function(p){return p})}function jt(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var d=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);d&&De(d,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function he(){if(e.input=be(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=te(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),rt()}function rt(){e._positionElement=e.config.positionElement||e._input}function Rt(){var d=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=te("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=d,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=d==="datetime-local"?"Y-m-d\\TH:i:S":d==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}A(e.mobileInput,"change",function(p){e.setDate(Be(p).value,!1,e.mobileFormatStr),ee("onChange"),ee("onClose")})}function Yt(d){if(e.isOpen===!0)return e.close();e.open(d)}function ee(d,p){if(e.config!==void 0){var b=e.config[d];if(b!==void 0&&b.length>0)for(var y=0;b[y]&&y<b.length;y++)b[y](e.selectedDates,e.input.value,e,p);d==="onChange"&&(e.input.dispatchEvent(Ae("change")),e.input.dispatchEvent(Ae("input")))}}function Ae(d){var p=document.createEvent("Event");return p.initEvent(d,!0,!0),p}function Ot(d){for(var p=0;p<e.selectedDates.length;p++){var b=e.selectedDates[p];if(b instanceof Date&&qe(b,d)===0)return""+p}return!1}function Jt(d){return e.config.mode!=="range"||e.selectedDates.length<2?!1:qe(d,e.selectedDates[0])>=0&&qe(d,e.selectedDates[1])<=0}function Dt(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(d,p){var b=new Date(e.currentYear,e.currentMonth,1);b.setMonth(e.currentMonth+p),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[p].textContent=Fn(b.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=b.getMonth().toString(),d.value=b.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Bt(d){var p=d||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(b){return e.formatDate(b,p)}).filter(function(b,y,M){return e.config.mode!=="range"||e.config.enableTime||M.indexOf(b)===y}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function xe(d){d===void 0&&(d=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Bt(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Bt(e.config.altFormat)),d!==!1&&ee("onValueUpdate")}function ht(d){var p=Be(d),b=e.prevMonthNav.contains(p),y=e.nextMonthNav.contains(p);b||y?wt(b?-1:1):e.yearElements.indexOf(p)>=0?p.select():p.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):p.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function St(d){d.preventDefault();var p=d.type==="keydown",b=Be(d),y=b;e.amPM!==void 0&&b===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Ke(e.amPM.textContent===e.l10n.amPM[0])]);var M=parseFloat(y.getAttribute("min")),$=parseFloat(y.getAttribute("max")),U=parseFloat(y.getAttribute("step")),j=parseInt(y.value,10),Q=d.delta||(p?d.which===38?1:-1:0),R=j+U*Q;if(typeof y.value<"u"&&y.value.length===2){var K=y===e.hourElement,ne=y===e.minuteElement;R<M?(R=$+R+Ke(!K)+(Ke(K)&&Ke(!e.amPM)),ne&&J(void 0,-1,e.hourElement)):R>$&&(R=y===e.hourElement?R-$-Ke(!e.amPM):M,ne&&J(void 0,1,e.hourElement)),e.amPM&&K&&(U===1?R+j===23:Math.abs(R-j)>U)&&(e.amPM.textContent=e.l10n.amPM[Ke(e.amPM.textContent===e.l10n.amPM[0])]),y.value=$e(R)}}return r(),e}function Gt(n,t){for(var e=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),i=[],r=0;r<e.length;r++){var a=e[r];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=la(a,t||{}),i.push(a._flatpickr)}catch(o){console.error(o)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Gt(this,n)},HTMLElement.prototype.flatpickr=function(n){return Gt([this],n)});var me=function(n,t){return typeof n=="string"?Gt(window.document.querySelectorAll(n),t):n instanceof Node?Gt([n],t):Gt(n,t)};me.defaultConfig={};me.l10ns={en:Ee({},an),default:Ee({},an)};me.localize=function(n){me.l10ns.default=Ee(Ee({},me.l10ns.default),n)};me.setDefaults=function(n){me.defaultConfig=Ee(Ee({},me.defaultConfig),n)};me.parseDate=_i({});me.formatDate=Ar({});me.compareDates=qe;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Gt(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=me);function pi(n,t){n.split(/\s+/).forEach(e=>{t(e)})}class ca{constructor(){this._events={}}on(t,e){pi(t,i=>{const r=this._events[i]||[];r.push(e),this._events[i]=r})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}pi(t,r=>{if(i===1){delete this._events[r];return}const a=this._events[r];a!==void 0&&(a.splice(a.indexOf(e),1),this._events[r]=a)})}trigger(t,...e){var i=this;pi(t,r=>{const a=i._events[r];a!==void 0&&a.forEach(o=>{o.apply(i,e)})})}}function ua(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;const r=this,a=[];if(Array.isArray(t))t.forEach(o=>{typeof o=="string"?a.push(o):(r.plugins.settings[o.name]=o.options,a.push(o.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],a.push(e));for(;i=a.shift();)r.require(i)}loadPlugin(t){var e=this,i=e.plugins,r=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}const Hn=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":fa(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),xr=n=>{if(!da(n))return n.join("");let t="",e=0;const i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((r,a)=>{if(r===n[a-1]){e++;return}i(),t+=r,e=1}),i(),t},Ir=n=>{let t=Array.from(n);return Hn(t)},da=n=>new Set(n).size!==n.length,ln=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),fa=n=>n.reduce((t,e)=>Math.max(t,pa(e)),0),pa=n=>Array.from(n).length,kr=n=>{if(n.length===1)return[[n]];let t=[];const e=n.substring(1);return kr(e).forEach(function(r){let a=r.slice(0);a[0]=n.charAt(0)+a[0],t.push(a),a=r.slice(0),a.unshift(n.charAt(0)),t.push(a)}),t},ha=[[0,65535]],ga="[̀-ͯ·ʾʼ]";let Ln,Mr;const ma=3,Si={},er={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in er){let t=er[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);Si[i]=n}}const va=new RegExp(Object.keys(Si).join("|")+"|"+ga,"gu"),ba=n=>{Ln===void 0&&(Ln=_a(ha))},tr=(n,t="NFKD")=>n.normalize(t),Pn=n=>Array.from(n).reduce((t,e)=>t+wa(e),""),wa=n=>(n=tr(n).toLowerCase().replace(va,t=>Si[t]||""),tr(n,"NFC"));function*ya(n){for(const[t,e]of n)for(let i=t;i<=e;i++){let r=String.fromCharCode(i),a=Pn(r);a!=r.toLowerCase()&&(a.length>ma||a.length!=0&&(yield{folded:a,composed:r,code_point:i}))}}const Ca=n=>{const t={},e=(i,r)=>{const a=t[i]||new Set,o=new RegExp("^"+Ir(a)+"$","iu");r.match(o)||(a.add(ln(r)),t[i]=a)};for(let i of ya(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},_a=n=>{const t=Ca(n),e={};let i=[];for(let a in t){let o=t[a];o&&(e[a]=Ir(o)),a.length>1&&i.push(ln(a))}i.sort((a,o)=>o.length-a.length);const r=Hn(i);return Mr=new RegExp("^"+r,"u"),e},Oa=(n,t=1)=>{let e=0;return n=n.map(i=>(Ln[i]&&(e+=i.length),Ln[i]||i)),e>=t?xr(n):""},Da=(n,t=1)=>(t=Math.max(t,n.length-1),Hn(kr(n).map(e=>Oa(e,t)))),nr=(n,t=!0)=>{let e=n.length>1?1:0;return Hn(n.map(i=>{let r=[];const a=t?i.length():i.length()-1;for(let o=0;o<a;o++)r.push(Da(i.substrs[o]||"",e));return xr(r)}))},Sa=(n,t)=>{for(const e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const r=o=>{for(const u of i){if(u.start===o.start&&u.substr===o.substr)return!1;if(!(o.length==1||u.length==1)&&(o.start<u.start&&o.end>u.start||u.start<o.start&&u.end>o.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1};class Nn{constructor(){Mt(this,"parts");Mt(this,"substrs");Mt(this,"start");Mt(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new Nn,r=JSON.parse(JSON.stringify(this.parts)),a=r.pop();for(const f of r)i.add(f);let o=e.substr.substring(0,t-a.start),u=o.length;return i.add({start:a.start,end:a.start+u,length:u,substr:o}),i}}const Ea=n=>{ba(),n=Pn(n);let t="",e=[new Nn];for(let i=0;i<n.length;i++){let a=n.substring(i).match(Mr);const o=n.substring(i,i+1),u=a?a[0]:null;let f=[],h=new Set;for(const m of e){const v=m.last();if(!v||v.length==1||v.end<=i)if(u){const C=u.length;m.add({start:i,end:i+C,length:C,substr:u}),h.add("1")}else m.add({start:i,end:i+1,length:1,substr:o}),h.add("2");else if(u){let C=m.clone(i,v);const H=u.length;C.add({start:i,end:i+H,length:H,substr:u}),f.push(C)}else h.add("3")}if(f.length>0){f=f.sort((m,v)=>m.length()-v.length());for(let m of f)Sa(m,e)||e.push(m);continue}if(i>0&&h.size==1&&!h.has("3")){t+=nr(e,!1);let m=new Nn;const v=e[0];v&&m.add(v.last()),e=[m]}}return t+=nr(e,!0),t},Aa=(n,t)=>{if(n)return n[t]},xa=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},hi=(n,t,e)=>{var i,r;return!n||(n=n+"",t.regex==null)||(r=n.search(t.regex),r===-1)?0:(i=t.string.length/n.length,r===0&&(i+=.5),i*e)},gi=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},Dn=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Ia=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=Pn(n+"").toLowerCase(),t=Pn(t+"").toLowerCase(),n>t?1:t>n?-1:0);class ka{constructor(t,e){Mt(this,"items");Mt(this,"settings");this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const r=[],a=t.split(/\s+/);var o;return i&&(o=new RegExp("^("+Object.keys(i).map(ln).join("|")+"):(.*)$")),a.forEach(u=>{let f,h=null,m=null;o&&(f=u.match(o))&&(h=f[1],u=f[2]),u.length>0&&(this.settings.diacritics?m=Ea(u)||null:m=ln(u),m&&e&&(m="\\b"+m)),r.push({string:u,regex:m?new RegExp(m,"iu"):null,field:h})}),r}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const r=t.options.fields,a=t.weights,o=r.length,u=t.getAttrFn;if(!o)return function(){return 1};const f=function(){return o===1?function(h,m){const v=r[0].field;return hi(u(m,v),h,a[v]||1)}:function(h,m){var v=0;if(h.field){const C=u(m,h.field);!h.regex&&C?v+=1/o:v+=hi(C,h,1)}else Dn(a,(C,H)=>{v+=hi(u(m,H),h,C)});return v/o}}();return i===1?function(h){return f(e[0],h)}:t.options.conjunction==="and"?function(h){var m,v=0;for(let C of e){if(m=f(C,h),m<=0)return 0;v+=m}return v/i}:function(h){var m=0;return Dn(e,v=>{m+=f(v,h)}),m/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];const r=this,a=t.options,o=!t.query&&a.sort_empty?a.sort_empty:a.sort;if(typeof o=="function")return o.bind(this);const u=function(h,m){return h==="$score"?m.score:t.getAttrFn(r.items[m.id],h)};if(o)for(let h of o)(t.query||h.field!=="$score")&&i.push(h);if(t.query){e=!0;for(let h of i)if(h.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(h=>h.field!=="$score");return i.length?function(h,m){var v,C;for(let H of i)if(C=H.field,v=(H.direction==="desc"?-1:1)*Ia(u(C,h),u(C,m)),v)return v;return 0}:null}prepareSearch(t,e){const i={};var r=Object.assign({},e);if(gi(r,"sort"),gi(r,"sort_empty"),r.fields){gi(r,"fields");const a=[];r.fields.forEach(o=>{typeof o=="string"&&(o={field:o,weight:1}),a.push(o),i[o.field]="weight"in o?o.weight:1}),r.fields=a}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?xa:Aa}}search(t,e){var i=this,r,a;a=this.prepareSearch(t,e),e=a.options,t=a.query;const o=e.score||i._getScoreFunction(a);t.length?Dn(i.items,(f,h)=>{r=o(f),(e.filter===!1||r>0)&&a.items.push({score:r,id:h})}):Dn(i.items,(f,h)=>{a.items.push({score:1,id:h})});const u=i._getSortFunction(a);return u&&a.items.sort(u),a.total=a.items.length,typeof e.limit=="number"&&(a.items=a.items.slice(0,e.limit)),a}}const Qe=n=>typeof n>"u"||n===null?null:In(n),In=n=>typeof n=="boolean"?n?"1":"0":n+"",mi=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Ma=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),Ta=(n,t)=>{var e;return function(i,r){var a=this;e&&(a.loading=Math.max(a.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,a.loadedSearches[i]=!0,n.call(a,i,r)},t)}},ir=(n,t,e)=>{var i,r=n.trigger,a={};n.trigger=function(){var o=arguments[0];if(t.indexOf(o)!==-1)a[o]=arguments;else return r.apply(n,arguments)},e.apply(n,[]),n.trigger=r;for(i of t)i in a&&r.apply(n,a[i])},Fa=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),ue=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Fe=(n,t,e,i)=>{n.addEventListener(t,e,i)},Lt=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},vi=(n,t)=>{const e=n.getAttribute("id");return e||(n.setAttribute("id",t),t)},rr=n=>n.replace(/[\\"']/g,"\\$&"),Pt=(n,t)=>{t&&n.append(t)},Ce=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},tt=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Tr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Tr=n=>typeof n=="string"&&n.indexOf("<")>-1,La=n=>n.replace(/['"\\]/g,"\\$&"),bi=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},Sn=(n,t)=>{Object.assign(n.style,t)},Ve=(n,...t)=>{var e=Fr(t);n=Lr(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},bt=(n,...t)=>{var e=Fr(t);n=Lr(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},Fr=n=>{var t=[];return Ce(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Lr=n=>(Array.isArray(n)||(n=[n]),n),wi=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},or=(n,t=0)=>t>0?n[n.length-1]:n[0],Pa=n=>Object.keys(n).length===0,sr=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},ce=(n,t)=>{Ce(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Oi=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)},Na=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=a=>{var o=a.data.match(t);if(o&&a.data.length>0){var u=document.createElement("span");u.className="highlight";var f=a.splitText(o.index);f.splitText(o[0].length);var h=f.cloneNode(!0);return u.appendChild(h),Oi(f,u),1}return 0},i=a=>{a.nodeType===1&&a.childNodes&&!/(script|style)/i.test(a.tagName)&&(a.className!=="highlight"||a.tagName!=="SPAN")&&Array.from(a.childNodes).forEach(o=>{r(o)})},r=a=>a.nodeType===3?e(a):(i(a),0);r(n)},$a=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})},Ha=65,ja=13,Ra=27,Ya=37,Ba=38,Va=39,qa=40,ar=8,za=46,lr=9,Ka=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),En=Ka?"metaKey":"ctrlKey",cr={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function ur(n,t){var e=Object.assign({},cr,t),i=e.dataAttr,r=e.labelField,a=e.valueField,o=e.disabledField,u=e.optgroupField,f=e.optgroupLabelField,h=e.optgroupValueField,m=n.tagName.toLowerCase(),v=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!v&&!e.allowEmptyOption){let A=n.querySelector('option[value=""]');A&&(v=A.textContent)}var C={placeholder:v,options:[],optgroups:[],items:[],maxItems:null},H=()=>{var A,k=C.options,I={},S=1;let B=0;var J=D=>{var N=Object.assign({},D.dataset),F=i&&N[i];return typeof F=="string"&&F.length&&(N=Object.assign(N,JSON.parse(F))),N},_e=(D,N)=>{var F=Qe(D.value);if(F!=null&&!(!F&&!e.allowEmptyOption)){if(I.hasOwnProperty(F)){if(N){var q=I[F][u];q?Array.isArray(q)?q.push(N):I[F][u]=[q,N]:I[F][u]=N}}else{var P=J(D);P[r]=P[r]||D.textContent,P[a]=P[a]||F,P[o]=P[o]||D.disabled,P[u]=P[u]||N,P.$option=D,P.$order=P.$order||++B,I[F]=P,k.push(P)}D.selected&&C.items.push(F)}},Z=D=>{var N,F;F=J(D),F[f]=F[f]||D.getAttribute("label")||"",F[h]=F[h]||S++,F[o]=F[o]||D.disabled,F.$order=F.$order||++B,C.optgroups.push(F),N=F[h],Ce(D.children,q=>{_e(q,N)})};C.maxItems=n.hasAttribute("multiple")?null:1,Ce(n.children,D=>{A=D.tagName.toLowerCase(),A==="optgroup"?Z(D):A==="option"&&_e(D)})},O=()=>{const A=n.getAttribute(i);if(A)C.options=JSON.parse(A),Ce(C.options,I=>{C.items.push(I[a])});else{var k=n.value.trim()||"";if(!e.allowEmptyOption&&!k.length)return;const I=k.split(e.delimiter);Ce(I,S=>{const B={};B[r]=S,B[a]=S,C.options.push(B)}),C.items=I}};return m==="select"?H():O(),Object.assign({},cr,C,t)}var dr=0;class Pe extends ua(ca){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,dr++;var i,r=tt(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var a=window.getComputedStyle&&window.getComputedStyle(r,null);i=a.getPropertyValue("direction");const o=ur(r,e);this.settings=o,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=vi(r,"tomselect-"+dr),this.isRequired=r.required,this.sifter=new ka(this.options,{diacritics:o.diacritics}),o.mode=o.mode||(o.maxItems===1?"single":"multi"),typeof o.hideSelected!="boolean"&&(o.hideSelected=o.mode==="multi"),typeof o.hidePlaceholder!="boolean"&&(o.hidePlaceholder=o.mode!=="multi");var u=o.createFilter;typeof u!="function"&&(typeof u=="string"&&(u=new RegExp(u)),u instanceof RegExp?o.createFilter=k=>u.test(k):o.createFilter=k=>this.settings.duplicates||!this.options[k]),this.initializePlugins(o.plugins),this.setupCallbacks(),this.setupTemplates();const f=tt("<div>"),h=tt("<div>"),m=this._render("dropdown"),v=tt('<div role="listbox" tabindex="-1">'),C=this.input.getAttribute("class")||"",H=o.mode;var O;if(Ve(f,o.wrapperClass,C,H),Ve(h,o.controlClass),Pt(f,h),Ve(m,o.dropdownClass,H),o.copyClassesToDropdown&&Ve(m,C),Ve(v,o.dropdownContentClass),Pt(m,v),tt(o.dropdownParent||f).appendChild(m),Tr(o.controlInput)){O=tt(o.controlInput);var A=["autocorrect","autocapitalize","autocomplete","spellcheck"];Ce(A,k=>{r.getAttribute(k)&&ce(O,{[k]:r.getAttribute(k)})}),O.tabIndex=-1,h.appendChild(O),this.focus_node=O}else o.controlInput?(O=tt(o.controlInput),this.focus_node=O):(O=tt("<input/>"),this.focus_node=h);this.wrapper=f,this.dropdown=m,this.dropdown_content=v,this.control=h,this.control_input=O,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,r=t.dropdown,a=t.dropdown_content,o=t.wrapper,u=t.control,f=t.input,h=t.focus_node,m={passive:!0},v=t.inputId+"-ts-dropdown";ce(a,{id:v}),ce(h,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":v});const C=vi(h,t.inputId+"-ts-control"),H="label[for='"+La(t.inputId)+"']",O=document.querySelector(H),A=t.focus.bind(t);if(O){Fe(O,"click",A),ce(O,{for:C});const S=vi(O,t.inputId+"-ts-label");ce(h,{"aria-labelledby":S}),ce(a,{"aria-labelledby":S})}if(o.style.width=f.style.width,t.plugins.names.length){const S="plugin-"+t.plugins.names.join(" plugin-");Ve([o,r],S)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&ce(f,{multiple:"multiple"}),e.placeholder&&ce(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+ln(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=Ta(e.load,e.loadThrottle)),Fe(r,"mousemove",()=>{t.ignoreHover=!1}),Fe(r,"mouseenter",S=>{var B=wi(S.target,"[data-selectable]",r);B&&t.onOptionHover(S,B)},{capture:!0}),Fe(r,"click",S=>{const B=wi(S.target,"[data-selectable]");B&&(t.onOptionSelect(S,B),ue(S,!0))}),Fe(u,"click",S=>{var B=wi(S.target,"[data-ts-item]",u);if(B&&t.onItemSelect(S,B)){ue(S,!0);return}i.value==""&&(t.onClick(),ue(S,!0))}),Fe(h,"keydown",S=>t.onKeyDown(S)),Fe(i,"keypress",S=>t.onKeyPress(S)),Fe(i,"input",S=>t.onInput(S)),Fe(h,"blur",S=>t.onBlur(S)),Fe(h,"focus",S=>t.onFocus(S)),Fe(i,"paste",S=>t.onPaste(S));const k=S=>{const B=S.composedPath()[0];if(!o.contains(B)&&!r.contains(B)){t.isFocused&&t.blur(),t.inputState();return}B==i&&t.isOpen?S.stopPropagation():ue(S,!0)},I=()=>{t.isOpen&&t.positionDropdown()};Fe(document,"mousedown",k),Fe(window,"scroll",I,m),Fe(window,"resize",I,m),this._destroy=()=>{document.removeEventListener("mousedown",k),window.removeEventListener("scroll",I),window.removeEventListener("resize",I),O&&O.removeEventListener("click",A)},this.revertSettings={innerHTML:f.innerHTML,tabIndex:f.tabIndex},f.tabIndex=-1,f.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,Fe(f,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,f.disabled?t.disable():f.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),Ve(f,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),Ce(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:a=>{let o=document.createElement("div");return o.className="optgroup",o.appendChild(a.options),o},optgroup_header:(a,o)=>'<div class="optgroup-header">'+o(a[i])+"</div>",option:(a,o)=>"<div>"+o(a[e])+"</div>",item:(a,o)=>"<div>"+o(a[e])+"</div>",option_create:(a,o)=>'<div class="create">Add <strong>'+o(a.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){const e=this,i=t?ur(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){bi(this.input,"input"),bi(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){ue(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var r=i.trim().split(e.settings.splitOn);Ce(r,a=>{Qe(a)&&(this.options[a]?e.addItem(a):e.createItem(a))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){ue(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),ue(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==lr&&ue(t);return}switch(t.keyCode){case Ha:if(Lt(En,t)&&e.control_input.value==""){ue(t),e.selectAll();return}break;case Ra:e.isOpen&&(ue(t,!0),e.close()),e.clearActiveItems();return;case qa:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}ue(t);return;case Ba:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}ue(t);return;case ja:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),ue(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&ue(t);return;case Ya:e.advanceSelection(-1,t);return;case Va:e.advanceSelection(1,t);return;case lr:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),ue(t)),e.settings.create&&e.createItem()&&ue(t));return;case ar:case za:e.deleteSelection(t);return}e.isInputHidden&&!Lt(En,t)&&ue(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=Ma(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),ue(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=e.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(ue(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;Ve(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||bt(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,bi(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];ir(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,r,a,o,u,f,h;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&Lt("shiftKey",e)&&i.activeItems.length){for(h=i.getLastActive(),o=Array.prototype.indexOf.call(i.control.children,h),u=Array.prototype.indexOf.call(i.control.children,t),o>u&&(f=o,o=u,u=f),a=o;a<=u;a++)t=i.control.children[a],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);ue(e)}else r==="click"&&Lt(En,e)||r==="keydown"&&Lt("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&bt(i,"last-active"),Ve(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),bt(t,"active")}clearActiveItems(){bt(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,ce(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),ce(t,{"aria-selected":"true"}),Ve(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,r=i.clientHeight,a=i.scrollTop||0,o=t.offsetHeight,u=t.getBoundingClientRect().top-i.getBoundingClientRect().top+a;u+o>r+a?this.scroll(u-r+o,e):u<a&&this.scroll(u,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(bt(this.activeOption,"active"),ce(this.activeOption,{"aria-selected":null})),this.activeOption=null,ce(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,Ce(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(ce(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&ce(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,r=this,a=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(a,{score:i})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(o=>{let u=Qe(o.id);return!(u&&r.items.indexOf(u)!==-1)})),e}refreshOptions(t=!0){var e,i,r,a,o,u,f,h,m,v;const C={},H=[];var O=this,A=O.inputValue();const k=A===O.lastQuery||A==""&&O.lastQuery==null;var I=O.search(A),S=null,B=O.settings.shouldOpen||!1,J=O.dropdown_content;k&&(S=O.activeOption,S&&(m=S.closest("[data-group]"))),a=I.items.length,typeof O.settings.maxOptions=="number"&&(a=Math.min(a,O.settings.maxOptions)),a>0&&(B=!0);const _e=(D,N)=>{let F=C[D];if(F!==void 0){let P=H[F];if(P!==void 0)return[F,P.fragment]}let q=document.createDocumentFragment();return F=H.length,H.push({fragment:q,order:N,optgroup:D}),[F,q]};for(e=0;e<a;e++){let D=I.items[e];if(!D)continue;let N=D.id,F=O.options[N];if(F===void 0)continue;let q=In(N),P=O.getOption(q,!0);for(O.settings.hideSelected||P.classList.toggle("selected",O.items.includes(q)),o=F[O.settings.optgroupField]||"",u=Array.isArray(o)?o:[o],i=0,r=u&&u.length;i<r;i++){o=u[i];let we=F.$order,pe=O.optgroups[o];pe===void 0?o="":we=pe.$order;const[ze,Ge]=_e(o,we);i>0&&(P=P.cloneNode(!0),ce(P,{id:F.$id+"-clone-"+i,"aria-selected":null}),P.classList.add("ts-cloned"),bt(P,"active"),O.activeOption&&O.activeOption.dataset.value==N&&m&&m.dataset.group===o.toString()&&(S=P)),Ge.appendChild(P),o!=""&&(C[o]=ze)}}O.settings.lockOptgroupOrder&&H.sort((D,N)=>D.order-N.order),f=document.createDocumentFragment(),Ce(H,D=>{let N=D.fragment,F=D.optgroup;if(!N||!N.children.length)return;let q=O.optgroups[F];if(q!==void 0){let P=document.createDocumentFragment(),we=O.render("optgroup_header",q);Pt(P,we),Pt(P,N);let pe=O.render("optgroup",{group:q,options:P});Pt(f,pe)}else Pt(f,N)}),J.innerHTML="",Pt(J,f),O.settings.highlight&&($a(J),I.query.length&&I.tokens.length&&Ce(I.tokens,D=>{Na(J,D.regex)}));var Z=D=>{let N=O.render(D,{input:A});return N&&(B=!0,J.insertBefore(N,J.firstChild)),N};if(O.loading?Z("loading"):O.settings.shouldLoad.call(O,A)?I.items.length===0&&Z("no_results"):Z("not_loading"),h=O.canCreate(A),h&&(v=Z("option_create")),O.hasOptions=I.items.length>0||h,B){if(I.items.length>0){if(!S&&O.settings.mode==="single"&&O.items[0]!=null&&(S=O.getOption(O.items[0])),!J.contains(S)){let D=0;v&&!O.settings.addPrecedence&&(D=1),S=O.selectable()[D]}}else v&&(S=v);t&&!O.isOpen&&(O.open(),O.scrollToOption(S,"auto")),O.setActiveOption(S)}else O.clearActiveOption(),t&&O.isOpen&&O.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const r=Qe(t[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[r]=t,i.lastQuery=null,e&&(i.userOptions[r]=e,i.trigger("option_add",r,t)),r)}addOptions(t,e=!1){Ce(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=Qe(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var r,a;const o=Qe(t),u=Qe(e[i.settings.valueField]);if(o===null)return;const f=i.options[o];if(f==null)return;if(typeof u!="string")throw new Error("Value must be set in option data");const h=i.getOption(o),m=i.getItem(o);if(e.$order=e.$order||f.$order,delete i.options[o],i.uncacheValue(u),i.options[u]=e,h){if(i.dropdown_content.contains(h)){const v=i._render("option",e);Oi(h,v),i.activeOption===h&&i.setActiveOption(v)}h.remove()}m&&(a=i.items.indexOf(o),a!==-1&&i.items.splice(a,1,u),r=i._render("item",e),m.classList.contains("active")&&Ve(r,"active"),Oi(m,r)),i.lastQuery=null}removeOption(t,e){const i=this;t=In(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};Ce(this.options,(r,a)=>{e(r,a)&&(i[a]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const i=Qe(t);if(i===null)return null;const r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,i="option"){var r=this,a;if(!t)return null;i=="item"?a=r.controlChildren():a=r.dropdown_content.querySelectorAll("[data-selectable]");for(let o=0;o<a.length;o++)if(a[o]==t)return e>0?a[o+1]:a[o-1];return null}getItem(t){if(typeof t=="object")return t;var e=Qe(t);return e!==null?this.control.querySelector(`[data-value="${rr(e)}"]`):null}addItems(t,e){var i=this,r=Array.isArray(t)?t:[t];r=r.filter(o=>i.items.indexOf(o)===-1);const a=r[r.length-1];r.forEach(o=>{i.isPending=o!==a,i.addItem(o,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];ir(this,i,()=>{var r,a;const o=this,u=o.settings.mode,f=Qe(t);if(!(f&&o.items.indexOf(f)!==-1&&(u==="single"&&o.close(),u==="single"||!o.settings.duplicates))&&!(f===null||!o.options.hasOwnProperty(f))&&(u==="single"&&o.clear(e),!(u==="multi"&&o.isFull()))){if(r=o._render("item",o.options[f]),o.control.contains(r)&&(r=r.cloneNode(!0)),a=o.isFull(),o.items.splice(o.caretPos,0,f),o.insertAtCaret(r),o.isSetup){if(!o.isPending&&o.settings.hideSelected){let h=o.getOption(f),m=o.getAdjacent(h,1);m&&o.setActiveOption(m)}!o.isPending&&!o.settings.closeAfterSelect&&o.refreshOptions(o.isFocused&&u!=="single"),o.settings.closeAfterSelect!=!1&&o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",f,r),o.isPending||o.updateOriginalInput({silent:e})}(!o.isPending||!a&&o.isFull())&&(o.inputState(),o.refreshState())}})}removeItem(t=null,e){const i=this;if(t=i.getItem(t),!t)return;var r,a;const o=t.dataset.value;r=sr(t),t.remove(),t.classList.contains("active")&&(a=i.activeItems.indexOf(t),i.activeItems.splice(a,1),bt(t,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(o)&&i.removeOption(o,e),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",o,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,r=i.caretPos,a;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var o=!1,u=f=>{if(i.unlock(),!f||typeof f!="object")return e();var h=Qe(f[i.settings.valueField]);if(typeof h!="string")return e();i.setTextboxValue(),i.addOption(f,!0),i.setCaret(r),i.addItem(h),e(f),o=!0};return typeof i.settings.create=="function"?a=i.settings.create.call(this,t,u):a={[i.settings.labelField]:t,[i.settings.valueField]:t},o||u(a),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",i),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",Pa(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,r;const a=e.input.querySelector('option[value=""]');if(e.is_select_tag){let h=function(m,v,C){return m||(m=tt('<option value="'+mi(v)+'">'+mi(C)+"</option>")),m!=a&&e.input.append(m),u.push(m),(m!=a||f>0)&&(m.selected=!0),m};var o=h;const u=[],f=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(m=>{m.selected=!1}),e.items.length==0&&e.settings.mode=="single"?h(a,"",""):e.items.forEach(m=>{if(i=e.options[m],r=i[e.settings.labelField]||"",u.includes(i.$option)){const v=e.input.querySelector(`option[value="${rr(m)}"]:not(:checked)`);h(v,m,r)}else i.$option=h(i.$option,m,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,ce(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Sn(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Sn(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,ce(e.focus_node,{"aria-expanded":"false"}),Sn(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;Sn(this.dropdown,{width:e.width+"px",top:i+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();Ce(i,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,i=e.caretPos,r=e.control;r.insertBefore(t,r.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,r,a,o=this;e=t&&t.keyCode===ar?-1:1,i=Fa(o.control_input);const u=[];if(o.activeItems.length)a=or(o.activeItems,e),r=sr(a),e>0&&r++,Ce(o.activeItems,f=>u.push(f));else if((o.isFocused||o.settings.mode==="single")&&o.items.length){const f=o.controlChildren();let h;e<0&&i.start===0&&i.length===0?h=f[o.caretPos-1]:e>0&&i.start===o.inputValue().length&&(h=f[o.caretPos]),h!==void 0&&u.push(h)}if(!o.shouldDelete(u,t))return!1;for(ue(t,!0),typeof r<"u"&&o.setCaret(r);u.length;)o.removeItem(u.pop());return o.inputState(),o.positionDropdown(),o.refreshOptions(!1),!0}shouldDelete(t,e){const i=t.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,r,a=this;a.rtl&&(t*=-1),!a.inputValue().length&&(Lt(En,e)||Lt("shiftKey",e)?(i=a.getLastActive(t),i?i.classList.contains("active")?r=a.getAdjacent(i,t,"item"):r=i:t>0?r=a.control_input.nextElementSibling:r=a.control_input.previousElementSibling,r&&(r.classList.contains("active")&&a.removeActiveItem(i),a.setActiveItemClass(r))):a.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return or(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,bt(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,r;const a=this;if(typeof this.settings.render[t]!="function"||(r=a.settings.render[t].call(this,e,mi),!r))return null;if(r=tt(r),t==="option"||t==="option_create"?e[a.settings.disabledField]?ce(r,{"aria-disabled":"true"}):ce(r,{"data-selectable":""}):t==="optgroup"&&(i=e.group[a.settings.optgroupValueField],ce(r,{"data-group":i}),e.group[a.settings.disabledField]&&ce(r,{"data-disabled":""})),t==="option"||t==="item"){const o=In(e[a.settings.valueField]);ce(r,{"data-value":o}),t==="item"?(Ve(r,a.settings.itemClass),ce(r,{"data-ts-item":""})):(Ve(r,a.settings.optionClass),ce(r,{role:"option",id:e.$id}),e.$div=r,a.options[o]=e)}return r}_render(t,e){const i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){Ce(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var r=this,a=r[e];r[e]=function(){var o,u;return t==="after"&&(o=a.apply(r,arguments)),u=i.apply(r,arguments),t==="instead"?u:(t==="before"&&(o=a.apply(r,arguments)),o)}}}const Wa=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Ua(){Wa(this.input,"change",()=>{this.sync()})}const Xa=n=>typeof n>"u"||n===null?null:Qa(n),Qa=n=>typeof n=="boolean"?n?"1":"0":n+"",fr=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Ga=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ja(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ja=n=>typeof n=="string"&&n.indexOf("<")>-1;function Za(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(u,f){f?(u.checked=!0,i.uncheckedClassNames&&u.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&u.classList.add(...i.checkedClassNames)):(u.checked=!1,i.checkedClassNames&&u.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&u.classList.add(...i.uncheckedClassNames))},a=function(u){setTimeout(()=>{var f=u.querySelector("input."+i.className);f instanceof HTMLInputElement&&r(f,u.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var o=t.settings.render.option;t.settings.render.option=(u,f)=>{var h=Ga(o.call(t,u,f)),m=document.createElement("input");i.className&&m.classList.add(i.className),m.addEventListener("click",function(C){fr(C)}),m.type="checkbox";const v=Xa(u[t.settings.valueField]);return r(m,!!(v&&t.items.indexOf(v)>-1)),h.prepend(m),h}}),t.on("item_remove",o=>{var u=t.getOption(o);u&&(u.classList.remove("selected"),a(u))}),t.on("item_add",o=>{var u=t.getOption(o);u&&a(u)}),t.hook("instead","onOptionSelect",(o,u)=>{if(u.classList.contains("selected")){u.classList.remove("selected"),t.removeItem(u.dataset.value),t.refreshOptions(),fr(o,!0);return}e.call(t,o,u),a(u)})}const el=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(tl(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},tl=n=>typeof n=="string"&&n.indexOf("<")>-1;function nl(n){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=el(e.html(e));i.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(i)})}const il=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Ut=(n,t,e,i)=>{n.addEventListener(t,e,i)},rl=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},ol=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(sl(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},sl=n=>typeof n=="string"&&n.indexOf("<")>-1,al=(n,t)=>{rl(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},ll=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},cl=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},ul=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function dl(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var a=n.settings.render.item;n.settings.render.item=(o,u)=>{const f=ol(a.call(n,o,u));al(f,{draggable:"true"});const h=A=>{i||il(A),A.stopPropagation()},m=A=>{r=f,setTimeout(()=>{f.classList.add("ts-dragging")},0)},v=A=>{A.preventDefault(),f.classList.add("ts-drag-over"),H(f,r)},C=()=>{f.classList.remove("ts-drag-over")},H=(A,k)=>{k!==void 0&&(ul(k,f)?ll(A,k):cl(A,k))},O=()=>{var A;document.querySelectorAll(".ts-drag-over").forEach(I=>I.classList.remove("ts-drag-over")),(A=r)==null||A.classList.remove("ts-dragging"),r=void 0;var k=[];n.control.querySelectorAll("[data-value]").forEach(I=>{if(I.dataset.value){let S=I.dataset.value;S&&k.push(S)}}),n.setValue(k)};return Ut(f,"mousedown",h),Ut(f,"dragstart",m),Ut(f,"dragenter",v),Ut(f,"dragover",v),Ut(f,"dragleave",C),Ut(f,"dragend",O),f}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}const fl=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},pl=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(hl(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},hl=n=>typeof n=="string"&&n.indexOf("<")>-1;function gl(n){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=pl(e.html(e)),r=i.querySelector("."+e.closeClass);r&&r.addEventListener("click",a=>{fl(a,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const ml=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},vl=(n,...t)=>{var e=bl(t);n=wl(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},bl=n=>{var t=[];return ml(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},wl=n=>(Array.isArray(n)||(n=[n]),n),yl=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function Cl(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;const e=n.getLastActive(t);if(e){const i=yl(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),vl(e,"last-active")}else n.setCaret(n.caretPos+t)})}const _l=27,Ol=9,Dl=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Sl=(n,t,e,i)=>{n.addEventListener(t,e,i)},El=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},pr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Al(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Al=n=>typeof n=="string"&&n.indexOf("<")>-1,xl=(n,...t)=>{var e=Il(t);n=kl(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},Il=n=>{var t=[];return El(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},kl=n=>(Array.isArray(n)||(n=[n]),n);function Ml(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,xl(n.control_input,"dropdown-input");const t=pr('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);const e=pr('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case _l:n.isOpen&&(Dl(e,!0),n.close()),n.clearActiveItems();return;case Ol:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),Sl(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}const An=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Tl(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const a of i)t.style[a]=e.style[a];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),n.on("update item_add item_remove",r),An(e,"input",r),An(e,"keyup",r),An(e,"blur",r),An(e,"update",r)})}function Fl(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function Ll(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const hr=37,Pl=39,Nl=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},$l=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function Hl(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,r,a,o;if(!n.isOpen||!(e.keyCode===hr||e.keyCode===Pl))return t.call(n,e);n.ignoreHover=!0,o=Nl(n.activeOption,"[data-group]"),i=$l(n.activeOption,"[data-selectable]"),o&&(e.keyCode===hr?o=o.previousSibling:o=o.nextSibling,o&&(a=o.querySelectorAll("[data-selectable]"),r=a[Math.min(a.length-1,i)],r&&n.setActiveOption(r)))})}const jl=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),gr=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},mr=(n,t,e,i)=>{n.addEventListener(t,e,i)},vr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Rl(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Rl=n=>typeof n=="string"&&n.indexOf("<")>-1;function Yl(n){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+jl(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(a,o)=>{var u=vr(r.call(e,a,o)),f=vr(i);return u.appendChild(f),mr(f,"mousedown",h=>{gr(h,!0)}),mr(f,"click",h=>{e.isLocked||(gr(h,!0),!e.isLocked&&e.shouldDelete([u],h)&&(e.removeItem(u),e.refreshOptions(!1),e.inputState()))}),u}})}}function Bl(n){const t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[i];r&&t.setTextboxValue(e.text.call(t,r))}})}const Vl=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},ql=(n,...t)=>{var e=zl(t);n=Kl(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},zl=n=>{var t=[];return Vl(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Kl=n=>(Array.isArray(n)||(n=[n]),n);function Wl(){const n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var r={},a,o=!1,u,f=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(a.clientHeight/(a.scrollHeight-a.scrollTop)>.9)return!0;if(n.activeOption){var C=n.selectable(),H=Array.from(C).indexOf(n.activeOption);if(H>=C.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const h=v=>typeof n.settings.maxOptions=="number"&&a.children.length>=n.settings.maxOptions?!1:!!(v in r&&r[v]),m=(v,C)=>n.items.indexOf(C)>=0||f.indexOf(C)>=0;n.setNextUrl=(v,C)=>{r[v]=C},n.getUrl=v=>{if(v in r){const C=r[v];return r[v]=!1,C}return n.clearPagination(),n.settings.firstUrl.call(n,v)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!o)return e.call(n)}),n.hook("instead","canLoad",v=>v in r?h(v):t.call(n,v)),n.hook("instead","loadCallback",(v,C)=>{if(!o)n.clearOptions(m);else if(u){const H=v[0];H!==void 0&&(u.dataset.value=H[n.settings.valueField])}i.call(n,v,C),o=!1}),n.hook("after","refreshOptions",()=>{const v=n.lastValue;var C;h(v)?(C=n.render("loading_more",{query:v}),C&&(C.setAttribute("data-selectable",""),u=C)):v in r&&!a.querySelector(".no-results")&&(C=n.render("no_more_results",{query:v})),C&&(ql(C,n.settings.optionClass),a.append(C))}),n.on("initialize",()=>{f=Object.keys(n.options),a=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),a.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&h(n.lastValue)&&(o||(o=!0,n.load.call(n,n.lastValue)))})})}Pe.define("change_listener",Ua);Pe.define("checkbox_options",Za);Pe.define("clear_button",nl);Pe.define("drag_drop",dl);Pe.define("dropdown_header",gl);Pe.define("caret_position",Cl);Pe.define("dropdown_input",Ml);Pe.define("input_autogrow",Tl);Pe.define("no_backspace_delete",Fl);Pe.define("no_active_items",Ll);Pe.define("optgroup_columns",Hl);Pe.define("remove_button",Yl);Pe.define("restore_on_backspace",Bl);Pe.define("virtual_scroll",Wl);(()=>{var Ii,ki;function n(s,c){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(s);c&&(g=g.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),l.push.apply(l,g)}return l}function t(s){for(var c=1;c<arguments.length;c++){var l=arguments[c]!=null?arguments[c]:{};c%2?n(Object(l),!0).forEach(function(g){i(s,g,l[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):n(Object(l)).forEach(function(g){Object.defineProperty(s,g,Object.getOwnPropertyDescriptor(l,g))})}return s}function e(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(s)}function i(s,c,l){return c in s?Object.defineProperty(s,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[c]=l,s}function r(){return r=Object.assign||function(s){for(var c=1;c<arguments.length;c++){var l=arguments[c];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(s[g]=l[g])}return s},r.apply(this,arguments)}function a(s,c){if(s==null)return{};var l={},g=Object.keys(s),w,_;for(_=0;_<g.length;_++)w=g[_],!(c.indexOf(w)>=0)&&(l[w]=s[w]);return l}function o(s,c){if(s==null)return{};var l=a(s,c),g,w;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(s);for(w=0;w<_.length;w++)g=_[w],!(c.indexOf(g)>=0)&&Object.prototype.propertyIsEnumerable.call(s,g)&&(l[g]=s[g])}return l}var u="1.15.1";function f(s){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(s)}var h=f(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),m=f(/Edge/i),v=f(/firefox/i),C=f(/safari/i)&&!f(/chrome/i)&&!f(/android/i),H=f(/iP(ad|od|hone)/i),O=f(/chrome/i)&&f(/android/i),A={capture:!1,passive:!1};function k(s,c,l){s.addEventListener(c,l,!h&&A)}function I(s,c,l){s.removeEventListener(c,l,!h&&A)}function S(s,c){if(c){if(c[0]===">"&&(c=c.substring(1)),s)try{if(s.matches)return s.matches(c);if(s.msMatchesSelector)return s.msMatchesSelector(c);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(c)}catch{return!1}return!1}}function B(s){return s.host&&s!==document&&s.host.nodeType?s.host:s.parentNode}function J(s,c,l,g){if(s){l=l||document;do{if(c!=null&&(c[0]===">"?s.parentNode===l&&S(s,c):S(s,c))||g&&s===l)return s;if(s===l)break}while(s=B(s))}return null}var _e=/\s+/g;function Z(s,c,l){if(s&&c)if(s.classList)s.classList[l?"add":"remove"](c);else{var g=(" "+s.className+" ").replace(_e," ").replace(" "+c+" "," ");s.className=(g+(l?" "+c:"")).replace(_e," ")}}function D(s,c,l){var g=s&&s.style;if(g){if(l===void 0)return document.defaultView&&document.defaultView.getComputedStyle?l=document.defaultView.getComputedStyle(s,""):s.currentStyle&&(l=s.currentStyle),c===void 0?l:l[c];!(c in g)&&c.indexOf("webkit")===-1&&(c="-webkit-"+c),g[c]=l+(typeof l=="string"?"":"px")}}function N(s,c){var l="";if(typeof s=="string")l=s;else do{var g=D(s,"transform");g&&g!=="none"&&(l=g+" "+l)}while(!c&&(s=s.parentNode));var w=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return w&&new w(l)}function F(s,c,l){if(s){var g=s.getElementsByTagName(c),w=0,_=g.length;if(l)for(;w<_;w++)l(g[w],w);return g}return[]}function q(){var s=document.scrollingElement;return s||document.documentElement}function P(s,c,l,g,w){if(!(!s.getBoundingClientRect&&s!==window)){var _,E,L,x,Y,V,W;if(s!==window&&s.parentNode&&s!==q()?(_=s.getBoundingClientRect(),E=_.top,L=_.left,x=_.bottom,Y=_.right,V=_.height,W=_.width):(E=0,L=0,x=window.innerHeight,Y=window.innerWidth,V=window.innerHeight,W=window.innerWidth),(c||l)&&s!==window&&(w=w||s.parentNode,!h))do if(w&&w.getBoundingClientRect&&(D(w,"transform")!=="none"||l&&D(w,"position")!=="static")){var ae=w.getBoundingClientRect();E-=ae.top+parseInt(D(w,"border-top-width")),L-=ae.left+parseInt(D(w,"border-left-width")),x=E+_.height,Y=L+_.width;break}while(w=w.parentNode);if(g&&s!==window){var G=N(w||s),ge=G&&G.a,ie=G&&G.d;G&&(E/=ie,L/=ge,W/=ge,V/=ie,x=E+V,Y=L+W)}return{top:E,left:L,bottom:x,right:Y,width:W,height:V}}}function we(s){var c=P(s),l=parseInt(D(s,"padding-left")),g=parseInt(D(s,"padding-top")),w=parseInt(D(s,"padding-right")),_=parseInt(D(s,"padding-bottom"));return c.top+=g+parseInt(D(s,"border-top-width")),c.left+=l+parseInt(D(s,"border-left-width")),c.width=s.clientWidth-l-w,c.height=s.clientHeight-g-_,c.bottom=c.top+c.height,c.right=c.left+c.width,c}function pe(s,c,l){for(var g=We(s,!0),w=P(s)[c];g;){var _=P(g)[l],E=void 0;if(E=w>=_,!E)return g;if(g===q())break;g=We(g,!1)}return!1}function ze(s,c,l,g){for(var w=0,_=0,E=s.children;_<E.length;){if(E[_].style.display!=="none"&&E[_]!==z.ghost&&(g||E[_]!==z.dragged)&&J(E[_],l.draggable,s,!1)){if(w===c)return E[_];w++}_++}return null}function Ge(s,c){for(var l=s.lastElementChild;l&&(l===z.ghost||D(l,"display")==="none"||c&&!S(l,c));)l=l.previousElementSibling;return l||null}function Ne(s,c){var l=0;if(!s||!s.parentNode)return-1;for(;s=s.previousElementSibling;)s.nodeName.toUpperCase()!=="TEMPLATE"&&s!==z.clone&&(!c||S(s,c))&&l++;return l}function cn(s){var c=0,l=0,g=q();if(s)do{var w=N(s),_=w.a,E=w.d;c+=s.scrollLeft*_,l+=s.scrollTop*E}while(s!==g&&(s=s.parentNode));return[c,l]}function un(s,c){for(var l in s)if(s.hasOwnProperty(l)){for(var g in c)if(c.hasOwnProperty(g)&&c[g]===s[l][g])return Number(l)}return-1}function We(s,c){if(!s||!s.getBoundingClientRect)return q();var l=s,g=!1;do if(l.clientWidth<l.scrollWidth||l.clientHeight<l.scrollHeight){var w=D(l);if(l.clientWidth<l.scrollWidth&&(w.overflowX=="auto"||w.overflowX=="scroll")||l.clientHeight<l.scrollHeight&&(w.overflowY=="auto"||w.overflowY=="scroll")){if(!l.getBoundingClientRect||l===document.body)return q();if(g||c)return l;g=!0}}while(l=l.parentNode);return q()}function jn(s,c){if(s&&c)for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l]);return s}function wt(s,c){return Math.round(s.top)===Math.round(c.top)&&Math.round(s.left)===Math.round(c.left)&&Math.round(s.height)===Math.round(c.height)&&Math.round(s.width)===Math.round(c.width)}var yt;function dn(s,c){return function(){if(!yt){var l=arguments,g=this;l.length===1?s.call(g,l[0]):s.apply(g,l),yt=setTimeout(function(){yt=void 0},c)}}}function Rn(){clearTimeout(yt),yt=void 0}function ut(s,c,l){s.scrollLeft+=c,s.scrollTop+=l}function $t(s){var c=window.Polymer,l=window.jQuery||window.Zepto;return c&&c.dom?c.dom(s).cloneNode(!0):l?l(s).clone(!0)[0]:s.cloneNode(!0)}var ve="Sortable"+new Date().getTime();function nt(){var s=[],c;return{captureAnimationState:function(){if(s=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(g){if(!(D(g,"display")==="none"||g===z.ghost)){s.push({target:g,rect:P(g)});var w=t({},s[s.length-1].rect);if(g.thisAnimationDuration){var _=N(g,!0);_&&(w.top-=_.f,w.left-=_.e)}g.fromRect=w}})}},addAnimationState:function(l){s.push(l)},removeAnimationState:function(l){s.splice(un(s,{target:l}),1)},animateAll:function(l){var g=this;if(!this.options.animation){clearTimeout(c),typeof l=="function"&&l();return}var w=!1,_=0;s.forEach(function(E){var L=0,x=E.target,Y=x.fromRect,V=P(x),W=x.prevFromRect,ae=x.prevToRect,G=E.rect,ge=N(x,!0);ge&&(V.top-=ge.f,V.left-=ge.e),x.toRect=V,x.thisAnimationDuration&&wt(W,V)&&!wt(Y,V)&&(G.top-V.top)/(G.left-V.left)===(Y.top-V.top)/(Y.left-V.left)&&(L=Yn(G,W,ae,g.options)),wt(V,Y)||(x.prevFromRect=Y,x.prevToRect=V,L||(L=g.options.animation),g.animate(x,G,V,L)),L&&(w=!0,_=Math.max(_,L),clearTimeout(x.animationResetTimer),x.animationResetTimer=setTimeout(function(){x.animationTime=0,x.prevFromRect=null,x.fromRect=null,x.prevToRect=null,x.thisAnimationDuration=null},L),x.thisAnimationDuration=L)}),clearTimeout(c),w?c=setTimeout(function(){typeof l=="function"&&l()},_):typeof l=="function"&&l(),s=[]},animate:function(l,g,w,_){if(_){D(l,"transition",""),D(l,"transform","");var E=N(this.el),L=E&&E.a,x=E&&E.d,Y=(g.left-w.left)/(L||1),V=(g.top-w.top)/(x||1);l.animatingX=!!Y,l.animatingY=!!V,D(l,"transform","translate3d("+Y+"px,"+V+"px,0)"),this.forRepaintDummy=Ht(l),D(l,"transition","transform "+_+"ms"+(this.options.easing?" "+this.options.easing:"")),D(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){D(l,"transition",""),D(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},_)}}}}function Ht(s){return s.offsetWidth}function Yn(s,c,l,g){return Math.sqrt(Math.pow(c.top-s.top,2)+Math.pow(c.left-s.left,2))/Math.sqrt(Math.pow(c.top-l.top,2)+Math.pow(c.left-l.left,2))*g.animation}var it=[],dt={initializeByDefault:!0},Ct={mount:function(s){for(var c in dt)dt.hasOwnProperty(c)&&!(c in s)&&(s[c]=dt[c]);it.forEach(function(l){if(l.pluginName===s.pluginName)throw"Sortable: Cannot mount plugin ".concat(s.pluginName," more than once")}),it.push(s)},pluginEvent:function(s,c,l){var g=this;this.eventCanceled=!1,l.cancel=function(){g.eventCanceled=!0};var w=s+"Global";it.forEach(function(_){c[_.pluginName]&&(c[_.pluginName][w]&&c[_.pluginName][w](t({sortable:c},l)),c.options[_.pluginName]&&c[_.pluginName][s]&&c[_.pluginName][s](t({sortable:c},l)))})},initializePlugins:function(s,c,l,g){it.forEach(function(E){var L=E.pluginName;if(!(!s.options[L]&&!E.initializeByDefault)){var x=new E(s,c,s.options);x.sortable=s,x.options=s.options,s[L]=x,r(l,x.defaults)}});for(var w in s.options)if(s.options.hasOwnProperty(w)){var _=this.modifyOption(s,w,s.options[w]);typeof _<"u"&&(s.options[w]=_)}},getEventProperties:function(s,c){var l={};return it.forEach(function(g){typeof g.eventProperties=="function"&&r(l,g.eventProperties.call(c[g.pluginName],s))}),l},modifyOption:function(s,c,l){var g;return it.forEach(function(w){s[w.pluginName]&&w.optionListeners&&typeof w.optionListeners[c]=="function"&&(g=w.optionListeners[c].call(s[w.pluginName],l))}),g}};function Bn(s){var c=s.sortable,l=s.rootEl,g=s.name,w=s.targetEl,_=s.cloneEl,E=s.toEl,L=s.fromEl,x=s.oldIndex,Y=s.newIndex,V=s.oldDraggableIndex,W=s.newDraggableIndex,ae=s.originalEvent,G=s.putSortable,ge=s.extraEventProperties;if(c=c||l&&l[ve],!!c){var ie,at=c.options,ke="on"+g.charAt(0).toUpperCase()+g.substr(1);window.CustomEvent&&!h&&!m?ie=new CustomEvent(g,{bubbles:!0,cancelable:!0}):(ie=document.createEvent("Event"),ie.initEvent(g,!0,!0)),ie.to=E||l,ie.from=L||l,ie.item=w||l,ie.clone=_,ie.oldIndex=x,ie.newIndex=Y,ie.oldDraggableIndex=V,ie.newDraggableIndex=W,ie.originalEvent=ae,ie.pullMode=G?G.lastPutMode:void 0;var lt=t(t({},ge),Ct.getEventProperties(g,c));for(var Se in lt)ie[Se]=lt[Se];l&&l.dispatchEvent(ie),at[ke]&&at[ke].call(c,ie)}}var fn=["evt"],Oe=function(s,c){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=l.evt,w=o(l,fn);Ct.pluginEvent.bind(z)(s,c,t({dragEl:T,parentEl:re,ghostEl:X,rootEl:oe,nextEl:Je,lastDownEl:ft,cloneEl:se,cloneHidden:He,dragStarted:xe,putSortable:he,activeSortable:z.active,originalEvent:g,oldIndex:pt,oldDraggableIndex:_t,newIndex:De,newDraggableIndex:Ue,hideGhostForTarget:pn,unhideGhostForTarget:Vt,cloneNowHidden:function(){He=!0},cloneNowShown:function(){He=!1},dispatchSortableEvent:function(_){be({sortable:c,name:_,originalEvent:g})}},w))};function be(s){Bn(t({putSortable:he,cloneEl:se,targetEl:T,rootEl:oe,oldIndex:pt,oldDraggableIndex:_t,newIndex:De,newDraggableIndex:Ue},s))}var T,re,X,oe,Je,ft,se,He,pt,De,_t,Ue,jt,he,rt=!1,Rt=!1,Yt=[],ee,Ae,Ot,Jt,Dt,Bt,xe,ht,St,d=!1,p=!1,b,y,M=[],$=!1,U=[],j=typeof document<"u",Q=H,R=m||h?"cssFloat":"float",K=j&&!O&&!H&&"draggable"in document.createElement("div"),ne=function(){if(j){if(h)return!1;var s=document.createElement("x");return s.style.cssText="pointer-events:auto",s.style.pointerEvents==="auto"}}(),je=function(s,c){var l=D(s),g=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),w=ze(s,0,c),_=ze(s,1,c),E=w&&D(w),L=_&&D(_),x=E&&parseInt(E.marginLeft)+parseInt(E.marginRight)+P(w).width,Y=L&&parseInt(L.marginLeft)+parseInt(L.marginRight)+P(_).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(w&&E.float&&E.float!=="none"){var V=E.float==="left"?"left":"right";return _&&(L.clear==="both"||L.clear===V)?"vertical":"horizontal"}return w&&(E.display==="block"||E.display==="flex"||E.display==="table"||E.display==="grid"||x>=g&&l[R]==="none"||_&&l[R]==="none"&&x+Y>g)?"vertical":"horizontal"},Ie=function(s,c,l){var g=l?s.left:s.top,w=l?s.right:s.bottom,_=l?s.width:s.height,E=l?c.left:c.top,L=l?c.right:c.bottom,x=l?c.width:c.height;return g===E||w===L||g+_/2===E+x/2},Et=function(s,c){var l;return Yt.some(function(g){var w=g[ve].options.emptyInsertThreshold;if(!(!w||Ge(g))){var _=P(g),E=s>=_.left-w&&s<=_.right+w,L=c>=_.top-w&&c<=_.bottom+w;if(E&&L)return l=g}}),l},ot=function(s){function c(w,_){return function(E,L,x,Y){var V=E.options.group.name&&L.options.group.name&&E.options.group.name===L.options.group.name;if(w==null&&(_||V))return!0;if(w==null||w===!1)return!1;if(_&&w==="clone")return w;if(typeof w=="function")return c(w(E,L,x,Y),_)(E,L,x,Y);var W=(_?E:L).options.group.name;return w===!0||typeof w=="string"&&w===W||w.join&&w.indexOf(W)>-1}}var l={},g=s.group;(!g||e(g)!="object")&&(g={name:g}),l.name=g.name,l.checkPull=c(g.pull,!0),l.checkPut=c(g.put),l.revertClone=g.revertClone,s.group=l},pn=function(){!ne&&X&&D(X,"display","none")},Vt=function(){!ne&&X&&D(X,"display","")};j&&!O&&document.addEventListener("click",function(s){if(Rt)return s.preventDefault(),s.stopPropagation&&s.stopPropagation(),s.stopImmediatePropagation&&s.stopImmediatePropagation(),Rt=!1,!1},!0);var st=function(s){if(T){s=s.touches?s.touches[0]:s;var c=Et(s.clientX,s.clientY);if(c){var l={};for(var g in s)s.hasOwnProperty(g)&&(l[g]=s[g]);l.target=l.rootEl=c,l.preventDefault=void 0,l.stopPropagation=void 0,c[ve]._onDragOver(l)}}},Vn=function(s){T&&T.parentNode[ve]._isOutsideThisEl(s.target)};function z(s,c){if(!(s&&s.nodeType&&s.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(s));this.el=s,this.options=c=r({},c),s[ve]=this;var l={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(s.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return je(s,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(_,E){_.setData("Text",E.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:z.supportPointer!==!1&&"PointerEvent"in window&&!C,emptyInsertThreshold:5};Ct.initializePlugins(this,s,l);for(var g in l)!(g in c)&&(c[g]=l[g]);ot(c);for(var w in this)w.charAt(0)==="_"&&typeof this[w]=="function"&&(this[w]=this[w].bind(this));this.nativeDraggable=c.forceFallback?!1:K,this.nativeDraggable&&(this.options.touchStartThreshold=1),c.supportPointer?k(s,"pointerdown",this._onTapStart):(k(s,"mousedown",this._onTapStart),k(s,"touchstart",this._onTapStart)),this.nativeDraggable&&(k(s,"dragover",this),k(s,"dragenter",this)),Yt.push(this.el),c.store&&c.store.get&&this.sort(c.store.get(this)||[]),r(this,nt())}z.prototype={constructor:z,_isOutsideThisEl:function(s){!this.el.contains(s)&&s!==this.el&&(ht=null)},_getDirection:function(s,c){return typeof this.options.direction=="function"?this.options.direction.call(this,s,c,T):this.options.direction},_onTapStart:function(s){if(s.cancelable){var c=this,l=this.el,g=this.options,w=g.preventOnFilter,_=s.type,E=s.touches&&s.touches[0]||s.pointerType&&s.pointerType==="touch"&&s,L=(E||s).target,x=s.target.shadowRoot&&(s.path&&s.path[0]||s.composedPath&&s.composedPath()[0])||L,Y=g.filter;if(jr(l),!T&&!(/mousedown|pointerdown/.test(_)&&s.button!==0||g.disabled)&&!x.isContentEditable&&!(!this.nativeDraggable&&C&&L&&L.tagName.toUpperCase()==="SELECT")&&(L=J(L,g.draggable,l,!1),!(L&&L.animated)&&ft!==L)){if(pt=Ne(L),_t=Ne(L,g.draggable),typeof Y=="function"){if(Y.call(this,s,L,this)){be({sortable:c,rootEl:x,name:"filter",targetEl:L,toEl:l,fromEl:l}),Oe("filter",c,{evt:s}),w&&s.cancelable&&s.preventDefault();return}}else if(Y&&(Y=Y.split(",").some(function(V){if(V=J(x,V.trim(),l,!1),V)return be({sortable:c,rootEl:V,name:"filter",targetEl:L,fromEl:l,toEl:l}),Oe("filter",c,{evt:s}),!0}),Y)){w&&s.cancelable&&s.preventDefault();return}g.handle&&!J(x,g.handle,l,!1)||this._prepareDragStart(s,E,L)}}},_prepareDragStart:function(s,c,l){var g=this,w=g.el,_=g.options,E=w.ownerDocument,L;if(l&&!T&&l.parentNode===w){var x=P(l);if(oe=w,T=l,re=T.parentNode,Je=T.nextSibling,ft=l,jt=_.group,z.dragged=T,ee={target:T,clientX:(c||s).clientX,clientY:(c||s).clientY},Dt=ee.clientX-x.left,Bt=ee.clientY-x.top,this._lastX=(c||s).clientX,this._lastY=(c||s).clientY,T.style["will-change"]="all",L=function(){if(Oe("delayEnded",g,{evt:s}),z.eventCanceled){g._onDrop();return}g._disableDelayedDragEvents(),!v&&g.nativeDraggable&&(T.draggable=!0),g._triggerDragStart(s,c),be({sortable:g,name:"choose",originalEvent:s}),Z(T,_.chosenClass,!0)},_.ignore.split(",").forEach(function(Y){F(T,Y.trim(),Zt)}),k(E,"dragover",st),k(E,"mousemove",st),k(E,"touchmove",st),k(E,"mouseup",g._onDrop),k(E,"touchend",g._onDrop),k(E,"touchcancel",g._onDrop),v&&this.nativeDraggable&&(this.options.touchStartThreshold=4,T.draggable=!0),Oe("delayStart",this,{evt:s}),_.delay&&(!_.delayOnTouchOnly||c)&&(!this.nativeDraggable||!(m||h))){if(z.eventCanceled){this._onDrop();return}k(E,"mouseup",g._disableDelayedDrag),k(E,"touchend",g._disableDelayedDrag),k(E,"touchcancel",g._disableDelayedDrag),k(E,"mousemove",g._delayedDragTouchMoveHandler),k(E,"touchmove",g._delayedDragTouchMoveHandler),_.supportPointer&&k(E,"pointermove",g._delayedDragTouchMoveHandler),g._dragStartTimer=setTimeout(L,_.delay)}else L()}},_delayedDragTouchMoveHandler:function(s){var c=s.touches?s.touches[0]:s;Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){T&&Zt(T),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var s=this.el.ownerDocument;I(s,"mouseup",this._disableDelayedDrag),I(s,"touchend",this._disableDelayedDrag),I(s,"touchcancel",this._disableDelayedDrag),I(s,"mousemove",this._delayedDragTouchMoveHandler),I(s,"touchmove",this._delayedDragTouchMoveHandler),I(s,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(s,c){c=c||s.pointerType=="touch"&&s,!this.nativeDraggable||c?this.options.supportPointer?k(document,"pointermove",this._onTouchMove):c?k(document,"touchmove",this._onTouchMove):k(document,"mousemove",this._onTouchMove):(k(T,"dragend",this),k(oe,"dragstart",this._onDragStart));try{document.selection?hn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(s,c){if(rt=!1,oe&&T){Oe("dragStarted",this,{evt:c}),this.nativeDraggable&&k(document,"dragover",Vn);var l=this.options;!s&&Z(T,l.dragClass,!1),Z(T,l.ghostClass,!0),z.active=this,s&&this._appendGhost(),be({sortable:this,name:"start",originalEvent:c})}else this._nulling()},_emulateDragOver:function(){if(Ae){this._lastX=Ae.clientX,this._lastY=Ae.clientY,pn();for(var s=document.elementFromPoint(Ae.clientX,Ae.clientY),c=s;s&&s.shadowRoot&&(s=s.shadowRoot.elementFromPoint(Ae.clientX,Ae.clientY),s!==c);)c=s;if(T.parentNode[ve]._isOutsideThisEl(s),c)do{if(c[ve]){var l=void 0;if(l=c[ve]._onDragOver({clientX:Ae.clientX,clientY:Ae.clientY,target:s,rootEl:c}),l&&!this.options.dragoverBubble)break}s=c}while(c=c.parentNode);Vt()}},_onTouchMove:function(s){if(ee){var c=this.options,l=c.fallbackTolerance,g=c.fallbackOffset,w=s.touches?s.touches[0]:s,_=X&&N(X,!0),E=X&&_&&_.a,L=X&&_&&_.d,x=Q&&y&&cn(y),Y=(w.clientX-ee.clientX+g.x)/(E||1)+(x?x[0]-M[0]:0)/(E||1),V=(w.clientY-ee.clientY+g.y)/(L||1)+(x?x[1]-M[1]:0)/(L||1);if(!z.active&&!rt){if(l&&Math.max(Math.abs(w.clientX-this._lastX),Math.abs(w.clientY-this._lastY))<l)return;this._onDragStart(s,!0)}if(X){_?(_.e+=Y-(Ot||0),_.f+=V-(Jt||0)):_={a:1,b:0,c:0,d:1,e:Y,f:V};var W="matrix(".concat(_.a,",").concat(_.b,",").concat(_.c,",").concat(_.d,",").concat(_.e,",").concat(_.f,")");D(X,"webkitTransform",W),D(X,"mozTransform",W),D(X,"msTransform",W),D(X,"transform",W),Ot=Y,Jt=V,Ae=w}s.cancelable&&s.preventDefault()}},_appendGhost:function(){if(!X){var s=this.options.fallbackOnBody?document.body:oe,c=P(T,!0,Q,!0,s),l=this.options;if(Q){for(y=s;D(y,"position")==="static"&&D(y,"transform")==="none"&&y!==document;)y=y.parentNode;y!==document.body&&y!==document.documentElement?(y===document&&(y=q()),c.top+=y.scrollTop,c.left+=y.scrollLeft):y=q(),M=cn(y)}X=T.cloneNode(!0),Z(X,l.ghostClass,!1),Z(X,l.fallbackClass,!0),Z(X,l.dragClass,!0),D(X,"transition",""),D(X,"transform",""),D(X,"box-sizing","border-box"),D(X,"margin",0),D(X,"top",c.top),D(X,"left",c.left),D(X,"width",c.width),D(X,"height",c.height),D(X,"opacity","0.8"),D(X,"position",Q?"absolute":"fixed"),D(X,"zIndex","100000"),D(X,"pointerEvents","none"),z.ghost=X,s.appendChild(X),D(X,"transform-origin",Dt/parseInt(X.style.width)*100+"% "+Bt/parseInt(X.style.height)*100+"%")}},_onDragStart:function(s,c){var l=this,g=s.dataTransfer,w=l.options;if(Oe("dragStart",this,{evt:s}),z.eventCanceled){this._onDrop();return}Oe("setupClone",this),z.eventCanceled||(se=$t(T),se.removeAttribute("id"),se.draggable=!1,se.style["will-change"]="",this._hideClone(),Z(se,this.options.chosenClass,!1),z.clone=se),l.cloneId=hn(function(){Oe("clone",l),!z.eventCanceled&&(l.options.removeCloneOnHide||oe.insertBefore(se,T),l._hideClone(),be({sortable:l,name:"clone"}))}),!c&&Z(T,w.dragClass,!0),c?(Rt=!0,l._loopId=setInterval(l._emulateDragOver,50)):(I(document,"mouseup",l._onDrop),I(document,"touchend",l._onDrop),I(document,"touchcancel",l._onDrop),g&&(g.effectAllowed="move",w.setData&&w.setData.call(l,g,T)),k(document,"drop",l),D(T,"transform","translateZ(0)")),rt=!0,l._dragStartId=hn(l._dragStarted.bind(l,c,s)),k(document,"selectstart",l),xe=!0,C&&D(document.body,"user-select","none")},_onDragOver:function(s){var c=this.el,l=s.target,g,w,_,E=this.options,L=E.group,x=z.active,Y=jt===L,V=E.sort,W=he||x,ae,G=this,ge=!1;if($)return;function ie(rn,Br){Oe(rn,G,t({evt:s,isOwner:Y,axis:ae?"vertical":"horizontal",revert:_,dragRect:g,targetRect:w,canSort:V,fromSortable:W,target:l,completed:ke,onMove:function(Mi,Vr){return qt(oe,c,T,g,Mi,P(Mi),s,Vr)},changed:lt},Br))}function at(){ie("dragOverAnimationCapture"),G.captureAnimationState(),G!==W&&W.captureAnimationState()}function ke(rn){return ie("dragOverCompleted",{insertion:rn}),rn&&(Y?x._hideClone():x._showClone(G),G!==W&&(Z(T,he?he.options.ghostClass:x.options.ghostClass,!1),Z(T,E.ghostClass,!0)),he!==G&&G!==z.active?he=G:G===z.active&&he&&(he=null),W===G&&(G._ignoreWhileAnimating=l),G.animateAll(function(){ie("dragOverAnimationComplete"),G._ignoreWhileAnimating=null}),G!==W&&(W.animateAll(),W._ignoreWhileAnimating=null)),(l===T&&!T.animated||l===c&&!l.animated)&&(ht=null),!E.dragoverBubble&&!s.rootEl&&l!==document&&(T.parentNode[ve]._isOutsideThisEl(s.target),!rn&&st(s)),!E.dragoverBubble&&s.stopPropagation&&s.stopPropagation(),ge=!0}function lt(){De=Ne(T),Ue=Ne(T,E.draggable),be({sortable:G,name:"change",toEl:c,newIndex:De,newDraggableIndex:Ue,originalEvent:s})}if(s.preventDefault!==void 0&&s.cancelable&&s.preventDefault(),l=J(l,E.draggable,c,!0),ie("dragOver"),z.eventCanceled)return ge;if(T.contains(s.target)||l.animated&&l.animatingX&&l.animatingY||G._ignoreWhileAnimating===l)return ke(!1);if(Rt=!1,x&&!E.disabled&&(Y?V||(_=re!==oe):he===this||(this.lastPutMode=jt.checkPull(this,x,T,s))&&L.checkPut(this,x,T,s))){if(ae=this._getDirection(s,l)==="vertical",g=P(T),ie("dragOverValid"),z.eventCanceled)return ge;if(_)return re=oe,at(),this._hideClone(),ie("revert"),z.eventCanceled||(Je?oe.insertBefore(T,Je):oe.appendChild(T)),ke(!0);var Se=Ge(c,E.draggable);if(!Se||Pr(s,ae,this)&&!Se.animated){if(Se===T)return ke(!1);if(Se&&c===s.target&&(l=Se),l&&(w=P(l)),qt(oe,c,T,g,l,w,s,!!l)!==!1)return at(),Se&&Se.nextSibling?c.insertBefore(T,Se.nextSibling):c.appendChild(T),re=c,lt(),ke(!0)}else if(Se&&Kn(s,ae,this)){var At=ze(c,0,E,!0);if(At===T)return ke(!1);if(l=At,w=P(l),qt(oe,c,T,g,l,w,s,!1)!==!1)return at(),c.insertBefore(T,At),re=c,lt(),ke(!0)}else if(l.parentNode===c){w=P(l);var Ze=0,xt,nn=T.parentNode!==c,zt=!Ie(T.animated&&T.toRect||g,l.animated&&l.toRect||w,ae),Re=ae?"top":"left",gt=pe(l,"top","top")||pe(T,"top","top"),vn=gt?gt.scrollTop:void 0;ht!==l&&(xt=w[Re],d=!1,p=!zt&&E.invertSwap||nn),Ze=Nr(s,l,w,ae,zt?1:E.swapThreshold,E.invertedSwapThreshold==null?E.swapThreshold:E.invertedSwapThreshold,p,ht===l);var ct;if(Ze!==0){var Kt=Ne(T);do Kt-=Ze,ct=re.children[Kt];while(ct&&(D(ct,"display")==="none"||ct===X))}if(Ze===0||ct===l)return ke(!1);ht=l,St=Ze;var It=l.nextElementSibling,mt=!1;mt=Ze===1;var kt=qt(oe,c,T,g,l,w,s,mt);if(kt!==!1)return(kt===1||kt===-1)&&(mt=kt===1),$=!0,setTimeout(zn,30),at(),mt&&!It?c.appendChild(T):l.parentNode.insertBefore(T,mt?It:l),gt&&ut(gt,0,vn-gt.scrollTop),re=T.parentNode,xt!==void 0&&!p&&(b=Math.abs(xt-P(l)[Re])),lt(),ke(!0)}if(c.contains(T))return ke(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){I(document,"mousemove",this._onTouchMove),I(document,"touchmove",this._onTouchMove),I(document,"pointermove",this._onTouchMove),I(document,"dragover",st),I(document,"mousemove",st),I(document,"touchmove",st)},_offUpEvents:function(){var s=this.el.ownerDocument;I(s,"mouseup",this._onDrop),I(s,"touchend",this._onDrop),I(s,"pointerup",this._onDrop),I(s,"touchcancel",this._onDrop),I(document,"selectstart",this)},_onDrop:function(s){var c=this.el,l=this.options;if(De=Ne(T),Ue=Ne(T,l.draggable),Oe("drop",this,{evt:s}),re=T&&T.parentNode,De=Ne(T),Ue=Ne(T,l.draggable),z.eventCanceled){this._nulling();return}rt=!1,p=!1,d=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Wn(this.cloneId),Wn(this._dragStartId),this.nativeDraggable&&(I(document,"drop",this),I(c,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),C&&D(document.body,"user-select",""),D(T,"transform",""),s&&(xe&&(s.cancelable&&s.preventDefault(),!l.dropBubble&&s.stopPropagation()),X&&X.parentNode&&X.parentNode.removeChild(X),(oe===re||he&&he.lastPutMode!=="clone")&&se&&se.parentNode&&se.parentNode.removeChild(se),T&&(this.nativeDraggable&&I(T,"dragend",this),Zt(T),T.style["will-change"]="",xe&&!rt&&Z(T,he?he.options.ghostClass:this.options.ghostClass,!1),Z(T,this.options.chosenClass,!1),be({sortable:this,name:"unchoose",toEl:re,newIndex:null,newDraggableIndex:null,originalEvent:s}),oe!==re?(De>=0&&(be({rootEl:re,name:"add",toEl:re,fromEl:oe,originalEvent:s}),be({sortable:this,name:"remove",toEl:re,originalEvent:s}),be({rootEl:re,name:"sort",toEl:re,fromEl:oe,originalEvent:s}),be({sortable:this,name:"sort",toEl:re,originalEvent:s})),he&&he.save()):De!==pt&&De>=0&&(be({sortable:this,name:"update",toEl:re,originalEvent:s}),be({sortable:this,name:"sort",toEl:re,originalEvent:s})),z.active&&((De==null||De===-1)&&(De=pt,Ue=_t),be({sortable:this,name:"end",toEl:re,originalEvent:s}),this.save()))),this._nulling()},_nulling:function(){Oe("nulling",this),oe=T=re=X=Je=se=ft=He=ee=Ae=xe=De=Ue=pt=_t=ht=St=he=jt=z.dragged=z.ghost=z.clone=z.active=null,U.forEach(function(s){s.checked=!0}),U.length=Ot=Jt=0},handleEvent:function(s){switch(s.type){case"drop":case"dragend":this._onDrop(s);break;case"dragenter":case"dragover":T&&(this._onDragOver(s),qn(s));break;case"selectstart":s.preventDefault();break}},toArray:function(){for(var s=[],c,l=this.el.children,g=0,w=l.length,_=this.options;g<w;g++)c=l[g],J(c,_.draggable,this.el,!1)&&s.push(c.getAttribute(_.dataIdAttr)||Hr(c));return s},sort:function(s,c){var l={},g=this.el;this.toArray().forEach(function(w,_){var E=g.children[_];J(E,this.options.draggable,g,!1)&&(l[w]=E)},this),c&&this.captureAnimationState(),s.forEach(function(w){l[w]&&(g.removeChild(l[w]),g.appendChild(l[w]))}),c&&this.animateAll()},save:function(){var s=this.options.store;s&&s.set&&s.set(this)},closest:function(s,c){return J(s,c||this.options.draggable,this.el,!1)},option:function(s,c){var l=this.options;if(c===void 0)return l[s];var g=Ct.modifyOption(this,s,c);typeof g<"u"?l[s]=g:l[s]=c,s==="group"&&ot(l)},destroy:function(){Oe("destroy",this);var s=this.el;s[ve]=null,I(s,"mousedown",this._onTapStart),I(s,"touchstart",this._onTapStart),I(s,"pointerdown",this._onTapStart),this.nativeDraggable&&(I(s,"dragover",this),I(s,"dragenter",this)),Array.prototype.forEach.call(s.querySelectorAll("[draggable]"),function(c){c.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yt.splice(Yt.indexOf(this.el),1),this.el=s=null},_hideClone:function(){if(!He){if(Oe("hideClone",this),z.eventCanceled)return;D(se,"display","none"),this.options.removeCloneOnHide&&se.parentNode&&se.parentNode.removeChild(se),He=!0}},_showClone:function(s){if(s.lastPutMode!=="clone"){this._hideClone();return}if(He){if(Oe("showClone",this),z.eventCanceled)return;T.parentNode==oe&&!this.options.group.revertClone?oe.insertBefore(se,T):Je?oe.insertBefore(se,Je):oe.appendChild(se),this.options.group.revertClone&&this.animate(T,se),D(se,"display",""),He=!1}}};function qn(s){s.dataTransfer&&(s.dataTransfer.dropEffect="move"),s.cancelable&&s.preventDefault()}function qt(s,c,l,g,w,_,E,L){var x,Y=s[ve],V=Y.options.onMove,W;return window.CustomEvent&&!h&&!m?x=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent("move",!0,!0)),x.to=c,x.from=s,x.dragged=l,x.draggedRect=g,x.related=w||c,x.relatedRect=_||P(c),x.willInsertAfter=L,x.originalEvent=E,s.dispatchEvent(x),V&&(W=V.call(Y,x,E)),W}function Zt(s){s.draggable=!1}function zn(){$=!1}function Kn(s,c,l){var g=P(ze(l.el,0,l.options,!0)),w=we(l.el),_=10;return c?s.clientX<w.left-_||s.clientY<g.top&&s.clientX<g.right:s.clientY<w.top-_||s.clientY<g.bottom&&s.clientX<g.left}function Pr(s,c,l){var g=P(Ge(l.el,l.options.draggable)),w=we(l.el),_=10;return c?s.clientX>w.right+_||s.clientY>g.bottom&&s.clientX>g.left:s.clientY>w.bottom+_||s.clientX>g.right&&s.clientY>g.top}function Nr(s,c,l,g,w,_,E,L){var x=g?s.clientY:s.clientX,Y=g?l.height:l.width,V=g?l.top:l.left,W=g?l.bottom:l.right,ae=!1;if(!E){if(L&&b<Y*w){if(!d&&(St===1?x>V+Y*_/2:x<W-Y*_/2)&&(d=!0),d)ae=!0;else if(St===1?x<V+b:x>W-b)return-St}else if(x>V+Y*(1-w)/2&&x<W-Y*(1-w)/2)return $r(c)}return ae=ae||E,ae&&(x<V+Y*_/2||x>W-Y*_/2)?x>V+Y/2?1:-1:0}function $r(s){return Ne(T)<Ne(s)?1:-1}function Hr(s){for(var c=s.tagName+s.className+s.src+s.href+s.textContent,l=c.length,g=0;l--;)g+=c.charCodeAt(l);return g.toString(36)}function jr(s){U.length=0;for(var c=s.getElementsByTagName("input"),l=c.length;l--;){var g=c[l];g.checked&&U.push(g)}}function hn(s){return setTimeout(s,0)}function Wn(s){return clearTimeout(s)}j&&k(document,"touchmove",function(s){(z.active||rt)&&s.cancelable&&s.preventDefault()}),z.utils={on:k,off:I,css:D,find:F,is:function(s,c){return!!J(s,c,s,!1)},extend:jn,throttle:dn,closest:J,toggleClass:Z,clone:$t,index:Ne,nextTick:hn,cancelNextTick:Wn,detectDirection:je,getChild:ze},z.get=function(s){return s[ve]},z.mount=function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];c[0].constructor===Array&&(c=c[0]),c.forEach(function(g){if(!g.prototype||!g.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(g));g.utils&&(z.utils=t(t({},z.utils),g.utils)),Ct.mount(g)})},z.create=function(s,c){return new z(s,c)},z.version=u;var fe=[],en,Un,Xn=!1,Qn,Gn,gn,tn;function Rr(){function s(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var c in this)c.charAt(0)==="_"&&typeof this[c]=="function"&&(this[c]=this[c].bind(this))}return s.prototype={dragStarted:function(c){var l=c.originalEvent;this.sortable.nativeDraggable?k(document,"dragover",this._handleAutoScroll):this.options.supportPointer?k(document,"pointermove",this._handleFallbackAutoScroll):l.touches?k(document,"touchmove",this._handleFallbackAutoScroll):k(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(c){var l=c.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):(I(document,"pointermove",this._handleFallbackAutoScroll),I(document,"touchmove",this._handleFallbackAutoScroll),I(document,"mousemove",this._handleFallbackAutoScroll)),Ei(),mn(),Rn()},nulling:function(){gn=Un=en=Xn=tn=Qn=Gn=null,fe.length=0},_handleFallbackAutoScroll:function(c){this._handleAutoScroll(c,!0)},_handleAutoScroll:function(c,l){var g=this,w=(c.touches?c.touches[0]:c).clientX,_=(c.touches?c.touches[0]:c).clientY,E=document.elementFromPoint(w,_);if(gn=c,l||this.options.forceAutoScrollFallback||m||h||C){Jn(c,this.options,E,l);var L=We(E,!0);Xn&&(!tn||w!==Qn||_!==Gn)&&(tn&&Ei(),tn=setInterval(function(){var x=We(document.elementFromPoint(w,_),!0);x!==L&&(L=x,mn()),Jn(c,g.options,x,l)},10),Qn=w,Gn=_)}else{if(!this.options.bubbleScroll||We(E,!0)===q()){mn();return}Jn(c,this.options,We(E,!1),!1)}}},r(s,{pluginName:"scroll",initializeByDefault:!0})}function mn(){fe.forEach(function(s){clearInterval(s.pid)}),fe=[]}function Ei(){clearInterval(tn)}var Jn=dn(function(s,c,l,g){if(c.scroll){var w=(s.touches?s.touches[0]:s).clientX,_=(s.touches?s.touches[0]:s).clientY,E=c.scrollSensitivity,L=c.scrollSpeed,x=q(),Y=!1,V;Un!==l&&(Un=l,mn(),en=c.scroll,V=c.scrollFn,en===!0&&(en=We(l,!0)));var W=0,ae=en;do{var G=ae,ge=P(G),ie=ge.top,at=ge.bottom,ke=ge.left,lt=ge.right,Se=ge.width,At=ge.height,Ze=void 0,xt=void 0,nn=G.scrollWidth,zt=G.scrollHeight,Re=D(G),gt=G.scrollLeft,vn=G.scrollTop;G===x?(Ze=Se<nn&&(Re.overflowX==="auto"||Re.overflowX==="scroll"||Re.overflowX==="visible"),xt=At<zt&&(Re.overflowY==="auto"||Re.overflowY==="scroll"||Re.overflowY==="visible")):(Ze=Se<nn&&(Re.overflowX==="auto"||Re.overflowX==="scroll"),xt=At<zt&&(Re.overflowY==="auto"||Re.overflowY==="scroll"));var ct=Ze&&(Math.abs(lt-w)<=E&&gt+Se<nn)-(Math.abs(ke-w)<=E&&!!gt),Kt=xt&&(Math.abs(at-_)<=E&&vn+At<zt)-(Math.abs(ie-_)<=E&&!!vn);if(!fe[W])for(var It=0;It<=W;It++)fe[It]||(fe[It]={});(fe[W].vx!=ct||fe[W].vy!=Kt||fe[W].el!==G)&&(fe[W].el=G,fe[W].vx=ct,fe[W].vy=Kt,clearInterval(fe[W].pid),(ct!=0||Kt!=0)&&(Y=!0,fe[W].pid=setInterval((function(){g&&this.layer===0&&z.active._onTouchMove(gn);var mt=fe[this.layer].vy?fe[this.layer].vy*L:0,kt=fe[this.layer].vx?fe[this.layer].vx*L:0;typeof V=="function"&&V.call(z.dragged.parentNode[ve],kt,mt,s,gn,fe[this.layer].el)!=="continue"||ut(fe[this.layer].el,kt,mt)}).bind({layer:W}),24))),W++}while(c.bubbleScroll&&ae!==x&&(ae=We(ae,!1)));Xn=Y}},30),Ai=function(s){var c=s.originalEvent,l=s.putSortable,g=s.dragEl,w=s.activeSortable,_=s.dispatchSortableEvent,E=s.hideGhostForTarget,L=s.unhideGhostForTarget;if(c){var x=l||w;E();var Y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:c,V=document.elementFromPoint(Y.clientX,Y.clientY);L(),x&&!x.el.contains(V)&&(_("spill"),this.onSpill({dragEl:g,putSortable:l}))}};function Zn(){}Zn.prototype={startIndex:null,dragStart:function(s){var c=s.oldDraggableIndex;this.startIndex=c},onSpill:function(s){var c=s.dragEl,l=s.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var g=ze(this.sortable.el,this.startIndex,this.options);g?this.sortable.el.insertBefore(c,g):this.sortable.el.appendChild(c),this.sortable.animateAll(),l&&l.animateAll()},drop:Ai},r(Zn,{pluginName:"revertOnSpill"});function ei(){}ei.prototype={onSpill:function(s){var c=s.dragEl,l=s.putSortable,g=l||this.sortable;g.captureAnimationState(),c.parentNode&&c.parentNode.removeChild(c),g.animateAll()},drop:Ai},r(ei,{pluginName:"removeOnSpill"}),z.mount(new Rr),z.mount(ei,Zn);var Yr=z;window.Sortable=Yr;var xi=s=>{let c=Array.from(s.childNodes).filter(l=>{var g;return l.nodeType===8&&["[if ENDBLOCK]><![endif]","__ENDBLOCK__"].includes((g=l.nodeValue)==null?void 0:g.trim())})[0];c&&s.appendChild(c)};(Ii=window.Livewire)==null||Ii.directive("sortable",({el:s,directive:c,component:l})=>{if(c.modifiers.length>0)return;let g={};s.hasAttribute("wire:sortable.options")&&(g=new Function(`return ${s.getAttribute("wire:sortable.options")};`)()),s.livewire_sortable=window.Sortable.create(s,{sort:!0,...g,draggable:"[wire\\:sortable\\.item]",handle:s.querySelector("[wire\\:sortable\\.handle]")?"[wire\\:sortable\\.handle]":null,dataIdAttr:"wire:sortable.item",group:{pull:!1,put:!1,...g.group,name:s.getAttribute("wire:sortable")},store:{...g.store,set:function(E){let L=E.toArray().map((x,Y)=>({order:Y+1,value:x}));xi(s),l.$wire.call(c.method,L)}}});let w=s.querySelector("[wire\\:sortable\\.item]")!==null;if(w)return;let _=l;Livewire.hook("commit",({component:E,succeed:L})=>{E.id===_.id&&(w||L(()=>{queueMicrotask(()=>{s.livewire_sortable.option("handle",s.querySelector("[wire\\:sortable\\.handle]")?"[wire\\:sortable\\.handle]":null),w=s.querySelector("[wire\\:sortable\\.item]")!==null})}))})}),(ki=window.Livewire)==null||ki.directive("sortable-group",({el:s,directive:c,component:l})=>{if(!c.modifiers.includes("item-group"))return;let g={};s.hasAttribute("wire:sortable-group.options")&&(g=new Function(`return ${s.getAttribute("wire:sortable-group.options")};`)()),s.livewire_sortable=window.Sortable.create(s,{sort:!0,...g,draggable:"[wire\\:sortable-group\\.item]",handle:"[wire\\:sortable-group\\.handle]",dataIdAttr:"wire:sortable-group.item",group:{pull:!0,put:!0,...g.group,name:s.closest("[wire\\:sortable-group]").getAttribute("wire:sortable-group")},onSort:w=>{if(w.to!==w.from&&s===w.from)return;let _=s.closest("[wire\\:sortable-group]"),E=Array.from(_.querySelectorAll("[wire\\:sortable-group\\.item-group]")).map((L,x)=>(xi(L),{order:x+1,value:L.getAttribute("wire:sortable-group.item-group"),items:L.livewire_sortable.toArray().map((Y,V)=>({order:V+1,value:Y}))}));_.closest("[wire\\:id]").__livewire.$wire.call(_.getAttribute("wire:sortable-group"),E)}})})})();/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.1
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/window.TomSelect=Pe;
